<!DOCTYPE html>
<html>
<head>
<link rel="shortcut icon" href="https://xzzz2020.github.io/favicon.ico" type="image/x-icon" /><meta name="viewport"content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/><meta name="apple-mobile-web-app-capable"content="yes"/><meta name="apple-mobile-web-app-status-bar-style"content="black"/><meta name="format-detection"content="telephone=no"/><meta name="renderer"content="webkit"><meta name="description"content="æ¸©æ•…è€ŒçŸ¥æ–°"><meta charset="UTF-8"><title>ã€æ€»ç»“ã€‘è‡ªå®šä¹‰SpringIOC | xzzz2020</title>
<link href="https://xzzz2020.github.io/styles/main.css" type="text/css" rel="stylesheet" /><link href="https://at.alicdn.com/t/font_1621793_zatzzgvf30g.css" type="text/css" rel="stylesheet" /><link rel="stylesheet" href="https://xzzz2020.github.io/media/css/katex.css"><script async src="https://cdn.jsdelivr.net/npm/busuanzi@2.3.0/bsz.pure.mini.min.js"></script><script src="https://xzzz2020.github.io/media/js/magnify.min.js"></script><script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js"></script><script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js" onload="renderMathInElement(document.body);"></script>
<script type="text/javascript">function btn_toggle(){document.getElementById("hn").classList.contains("no-js")?document.getElementById("hn").classList.remove("no-js"):document.getElementById("hn").classList.add("no-js")}</script>

<link rel="canonical" href="https://xzzz2020.github.io/post/axgzRz0gg/" />
</head>
<body>
<div class="progress"></div><style>.progress{background:linear-gradient(to right,#87ceeb var(--scroll),transparent 0);background-repeat:no-repeat;position:fixed;width:100%;height:4px;z-index:1}</style><div class="darkmode-background"></div><div class="darkmode-layer"></div>
<noscript><p class="warn" >æœ¬é¡µé¢éœ€è¦æµè§ˆå™¨æ”¯æŒï¼ˆå¯ç”¨ï¼‰JavaScript</p></noscript><div class="header"><div class="logo_title"><div class="title animated fadeInDown"><a href="https://xzzz2020.github.io"><img alt="logo" style="display:inline-block;" src="https://xzzz2020.github.io/images/avatar.png"/></a><h1 title="xzzz2020" class="weaklink"><a  href="/">xzzz2020</a></h1>

<div class="navbar weaklink">
<div class="normal_nav">
<div class="bitcron_nav_container"><div class="bitcron_nav"><div class="bitcron_nav"><div style="display:flex;justify-content:center;"><nav class="mixed_site_nav_wrap site_nav_wrap"><ul class="mixed_site_nav site_nav sm sm-base">	<li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/" class="selected active current nav__item" >é¦–é¡µ</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/archives" class="selected active current nav__item" >å½’æ¡£</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/tags" class="selected active current nav__item" >æ ‡ç­¾</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/post/about" class="selected active current nav__item" >å…³äº</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/post/Friendship_chain" class="selected active current nav__item" >å‹é“¾</a></li></ul></nav>
<div style="float:right;margin-top:1em"><form id="gridea-search-form" data-update="1578893743252" action="/search/index.html"><input class="search-input" autocomplete="off" spellcheck="false" name="q" placeholder="Search..."></form></div><div style="margin-left:0.5em;margin-top:1.2em"><input id="switch_default" onclick="mobileBtn()" type="checkbox" class="switch_default"><label for="switch_default" class="toggleBtn"></label></div></div>
<div class="clear clear_nav_inline_end"></div></div></div><div class="clear clear_nav_end"></div></div></div><div class="hamberger" href="javascript:void(0)" onclick="btn_toggle();"><i class="iconfont icon-category"></i></div></div></div></div>
<div id="hn" class="no-js hidden_nav animated fadeInDown"><div class="bitcron_nav_container"><div class="bitcron_nav"><nav class="mixed_site_nav_wrap site_nav_wrap"><ul class="mixed_site_nav site_nav sm sm-base">	<li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/" class="selected active current nav__item" >é¦–é¡µ</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/archives" class="selected active current nav__item" >å½’æ¡£</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/tags" class="selected active current nav__item" >æ ‡ç­¾</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/post/about" class="selected active current nav__item" >å…³äº</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/post/Friendship_chain" class="selected active current nav__item" >å‹é“¾</a></li></ul><div class="clear clear_nav_inline_end"></div></nav></div><div class="clear clear_nav_end"></div></div>
<div style="display:flex;justify-content:center;inline-block;text-align:center;margin-top:7%"><div><form id="gridea-search-form" data-update="1600686962942" action="/search/index.html"><input class="search-input" autocomplete="off" spellcheck="false" name="q"  placeholder="Search..." /></form></div><div style="margin-left:0.5em"><input id="switch_default_h" onclick="mobileBtn()" type="checkbox" class="switch_default"><label for="switch_default" class="toggleBtn"></label></div></div>
</div></div>
<script>function enableDarkmode(){document.body.classList.add("darkmode"),document.getElementById("switch_default").checked=1,document.getElementById("switch_default_h").checked=1}function removeDarkmode(){document.body.classList.remove("darkmode"),document.getElementById("switch_default").checked=0,document.getElementById("switch_default_h").checked=0}function getCookie(a){var b,c=new RegExp("(^| )"+a+"=([^;]*)(;|$)");return(b=document.cookie.match(c))?unescape(b[2]):null}cookie=getCookie("darkmode"),"enable"==cookie&&enableDarkmode(),window.matchMedia("(prefers-color-scheme: dark)").matches&&"disable"!==cookie&&(enableDarkmode(),document.cookie="darkmode=enable; path=/");var mobileBtn=function(){1==document.getElementById("switch_default").checked?(enableDarkmode(),document.cookie="darkmode=enable; path=/"):(removeDarkmode(),document.cookie="darkmode=disable; path=/")};</script>

<div class="main"><div class="main-inner"><div class="content">
<article class="post">
<h2 class="post_title sm_margin"><a>ã€æ€»ç»“ã€‘è‡ªå®šä¹‰SpringIOC</a></h2>
<script>function lan(){if(document.getElementById("lan").innerText=="ç¹"){var s=document.getElementById("tongwenlet_cn");if(s!=null){document.body.removeChild(s)}var s=document.createElement("script");s.language="javascript";s.type="text/javascript";s.src="https://cdn.jsdelivr.net/gh/qyxtim/Static@1.1/bookmarklet_tw.js";s.id="tongwenlet_cn";document.body.appendChild(s);document.getElementById("lan").innerHTML="ç®€"}else{if(document.getElementById("lan").innerText=="ç°¡"){var s=document.getElementById("tongwenlet_cn");if(s!=null){document.body.removeChild(s)}var s=document.createElement("script");s.language="javascript";s.type="text/javascript";s.src="https://cdn.jsdelivr.net/gh/qyxtim/Static@1.1/bookmarklet_cn.js";s.id="tongwenlet_cn";document.body.appendChild(s);document.getElementById("lan").innerHTML="ç¹"}}};</script>
<section class="post_details"><i class="iconfont icon-calendar"></i><span style="margin-right:15px"> 2020-09-10</span><i class="iconfont icon-browse"></i><span style="margin-right:15px"> <span id="busuanzi_value_page_pv"></span> Views</span><i class="iconfont icon-category"></i><span class="weaklink" style="margin-right:15px">	<a href="https://xzzz2020.github.io/tag/spring/" class="tag">Spring</a></span><i class="iconfont icon-caret-down"></i><span style="margin-right:15px">3150å­—</span><i class="iconfont icon-naozhong"></i><span style="margin-right:15px">14 min read</span><a id="lan" href="javascript:void(0);"onclick="lan();"title="è°ƒæ•´ç®€ç¹ä½“" style="margin-right:15px;">ç¹</a>
</section>

<img class="featureImg" alt="featureimg" src="https://img-1302474103.cos.ap-nanjing.myqcloud.com/img/photo-1599709513275-507ff045e42b.webp" referrerpolicy="no-referrer">

<div style="display:flex">
<div class="md_block" id="md_block">
<div class="round-shape-one"></div>
<p><ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#%E4%B8%80-%E6%89%8B%E5%86%99springioc%E5%AE%B9%E5%99%A8%E7%AE%80%E4%BB%8B">ä¸€ã€æ‰‹å†™SpringIOCå®¹å™¨ç®€ä»‹</a></li>
<li><a href="#%E4%BA%8C-%E5%88%9B%E5%BB%BA%E6%B3%A8%E8%A7%A3">äºŒã€åˆ›å»ºæ³¨è§£</a></li>
<li><a href="#%E4%B8%89-%E6%8F%90%E5%8F%96%E6%A0%87%E8%AE%B0%E5%AF%B9%E8%B1%A1">ä¸‰ã€æå–æ ‡è®°å¯¹è±¡</a>
<ul>
<li><a href="#1-%E6%8C%87%E5%AE%9A%E8%8C%83%E5%9B%B4%E5%8A%A0%E8%BD%BD">1. æŒ‡å®šèŒƒå›´åŠ è½½</a></li>
</ul>
</li>
<li><a href="#%E5%9B%9B-%E5%AE%9E%E7%8E%B0ioc%E5%AE%B9%E5%99%A8">å››ã€å®ç°IOCå®¹å™¨</a>
<ul>
<li><a href="#1-%E6%9E%9A%E4%B8%BE%E7%9A%84%E5%8D%95%E4%BE%8B">1. æšä¸¾çš„å•ä¾‹</a></li>
<li><a href="#2-%E4%BF%9D%E5%AD%98class%E5%AF%B9%E8%B1%A1%E5%8F%8A%E5%85%B6%E5%AE%9E%E4%BE%8B%E7%9A%84%E8%BD%BD%E4%BD%93">2. ä¿å­˜Classå¯¹è±¡åŠå…¶å®ä¾‹çš„è½½ä½“</a></li>
<li><a href="#3-%E5%AE%B9%E5%99%A8%E5%8A%A0%E8%BD%BD">3. å®¹å™¨åŠ è½½</a></li>
<li><a href="#4-%E5%AE%B9%E5%99%A8%E7%9A%84%E6%93%8D%E4%BD%9C%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5">4. å®¹å™¨çš„æ“ä½œï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰</a></li>
</ul>
</li>
<li><a href="#%E4%BA%94-%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5">äº”ã€ä¾èµ–æ³¨å…¥</a>
<ul>
<li><a href="#1-%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5%E7%9A%84%E6%B3%A8%E8%A7%A3">1. ä¾èµ–æ³¨å…¥çš„æ³¨è§£</a></li>
<li><a href="#2-%E5%AF%B9%E6%9C%89%E6%B3%A8%E8%A7%A3%E7%9A%84%E5%B1%9E%E6%80%A7%E8%BF%9B%E8%A1%8C%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5">2. å¯¹æœ‰æ³¨è§£çš„å±æ€§è¿›è¡Œä¾èµ–æ³¨å…¥</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</p>
<h2 id="ä¸€-æ‰‹å†™springiocå®¹å™¨ç®€ä»‹">ä¸€ã€æ‰‹å†™SpringIOCå®¹å™¨ç®€ä»‹</h2>
<p><strong>å·²ç»å®ç°çš„åŠŸèƒ½æœ‰</strong>ï¼š</p>
<ol>
<li><strong>æä¾›æ³¨è§£@Serviceã€@Componentã€@Controllerã€@Repositorï¼Œæ ‡è®°éœ€è¦åŠ è½½åˆ°IOCå®¹å™¨ç®¡ç†çš„ç±»</strong></li>
<li>æä¾›äº†ä¸€ä¸ªClassUtilå·¥å…·ç±»ï¼Œ<strong>æ”¯æŒåŠ è½½æŒ‡å®šåŒ…ä¸‹åŠå…¶å­åŒ…æ‰€æœ‰.classæ–‡ä»¶</strong>ï¼Œæ”¯æŒæ³¨å…¥å±æ€§ï¼Œæ”¯æŒé€šè¿‡åå°„classåŠ è½½å®ä¾‹åŒ–å¯¹è±¡ï¼ˆ<strong>ä»…æ”¯æŒé»˜è®¤æ„é€ </strong>ï¼‰</li>
<li>æä¾›IOCå®¹å™¨BeanContainerï¼Œæ”¯æŒé€šè¿‡ClassUtilå·¥å…·ç±»ï¼ŒåŠ è½½è¢«æ³¨è§£æ ‡è®°çš„ç±»ï¼Œç›®å‰<strong>ä»…æ”¯æŒå•ä¾‹æ¨¡å¼ä»¥åŠéæ‡’åŠ è½½çš„æ–¹å¼</strong></li>
<li><strong>æä¾›IOCå®¹å™¨å¢äº§æ”¹çš„æ–¹æ³•ï¼Œè·å–IOCçš„Beançš„æ–¹å¼æœ‰ï¼šé€šè¿‡classç›´æ¥åŠ è½½ï¼›è·å–æŸä¸€ä¸ªæ ‡è®°çš„æ³¨è§£æ‰€æœ‰classé›†åˆï¼›è·å–å…¨éƒ¨çš„classé›†åˆï¼›è·å–çˆ¶ç±»æˆ–è€…æ¥å£çš„å®ç°ç±»ç»“åˆClass</strong></li>
<li><strong>æä¾›ä¾èµ–æ³¨å…¥çš„æ³¨è§£@Autowiredï¼Œä»…æ”¯æŒæ³¨å…¥åˆ°å±æ€§ä¸Šï¼Œè¯¥æ³¨è§£æä¾›ä¸€ä¸ªvalueï¼Œç”¨æˆ·å¯ä»¥æŒ‡å®šè·å–å…·ä½“çš„æ¥å£å®ç°ç±»çš„åç§°</strong></li>
<li>æä¾›å®Œæˆæ‰€æœ‰æ ‡è®°åœ¨IOCå®¹å™¨ä¸­å¯¹è±¡å±æ€§ä¾èµ–æ³¨å…¥çš„ç±»DependencyInjectorï¼Œå°†æ‰«æ@Autowiredï¼Œæ ¹æ®ç”¨æˆ·å®šä¹‰çš„æ³¨è§£valueæˆ–è€…é»˜è®¤å€¼æ³¨å…¥åˆ°å±æ€§ä¸­</li>
</ol>
<blockquote>
<p>ä½¿ç”¨BeanContainerçš„loadBeansæ–¹æ³•ï¼ŒæŒ‡å®šæ¡†æ¶éœ€è¦ç®¡ç†çš„åŒ…è·¯å¾„ï¼Œå°†ç›¸å…³ç±»åŠ å…¥åˆ°IOCå®¹å™¨ä¸­ï¼Œå†åˆ©ç”¨DependencyInjectorçš„doIocæ–¹æ³•å®ç°å±æ€§çš„ä¾èµ–æ³¨å…¥ã€‚</p>
</blockquote>
<p><strong>å®ç°çš„æ€è·¯ä¸º</strong>ï¼š</p>
<ol>
<li>åˆ›å»ºæ³¨è§£</li>
<li>æå–æ ‡è®°å¯¹è±¡</li>
<li>å®ç°å®¹å™¨</li>
<li>ä¾èµ–æ³¨å…¥</li>
</ol>
<p><strong>æå–æ ‡è®°å¯¹è±¡</strong></p>
<ol>
<li>æŒ‡å®šèŒƒå›´ï¼Œè·å–èŒƒå›´å†…å…¨éƒ¨çš„ç±»</li>
<li>éå†æ‰€æœ‰ç±»ï¼Œè·å–è¢«æ³¨è§£æ ‡è®°çš„ç±»å¹¶åŠ è½½åˆ°å®¹å™¨é‡Œ</li>
</ol>
<h2 id="äºŒ-åˆ›å»ºæ³¨è§£">äºŒã€åˆ›å»ºæ³¨è§£</h2>
<pre><code class="language-java">//è®¾ç½®æ˜¯ä½œç”¨åœ¨ç±»ä¸Šé¢çš„
@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
public @interface Component {
}
</code></pre>
<pre><code class="language-java">//è®¾ç½®æ˜¯ä½œç”¨åœ¨ç±»ä¸Šé¢çš„
@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
public @interface Controller {
}
</code></pre>
<pre><code class="language-java">//è®¾ç½®æ˜¯ä½œç”¨åœ¨ç±»ä¸Šé¢çš„
@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
public @interface Repository {
}
</code></pre>
<pre><code class="language-java">//è®¾ç½®æ˜¯ä½œç”¨åœ¨ç±»ä¸Šé¢çš„
@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
public @interface Service {
}
</code></pre>
<h2 id="ä¸‰-æå–æ ‡è®°å¯¹è±¡">ä¸‰ã€æå–æ ‡è®°å¯¹è±¡</h2>
<h3 id="1-æŒ‡å®šèŒƒå›´åŠ è½½">1. æŒ‡å®šèŒƒå›´åŠ è½½</h3>
<ul>
<li>
<p>é¦–å…ˆéœ€è¦è·å–åˆ°ä¸€ä¸ªç±»åŠ è½½å™¨ï¼Œé€šè¿‡ç±»åŠ è½½å™¨åŠ è½½ç”¨æˆ·æŒ‡å®šåŒ…çš„èµ„æºï¼Œç±»åŠ è½½å™¨è¯¦è§£ï¼ŒæŸ¥çœ‹è¿™ä¸ªæ–‡ç« ï¼š<a href="https://xzzz2020.gitee.io/post/jTbAiVT5N/">ç±»åŠ è½½å™¨æ€»ç»“</a></p>
</li>
<li>
<p>è·å–ç±»åŠ è½½çš„æ–¹å¼ï¼Œå¯ä»¥é€šè¿‡å½“å‰çš„çº¿ç¨‹è·å–</p>
</li>
</ul>
<pre><code class="language-java">/**
 * è·å–ç±»åŠ è½½å™¨
 *
 * @return å½“å‰ç±»åŠ è½½å™¨
 */
public static ClassLoader getClassLoader() {
    return Thread.currentThread().getContextClassLoader();
}
</code></pre>
<ul>
<li>ç”±äºç”¨æˆ·ä¼ é€’è¿‡æ¥çš„åªæ˜¯ä¸ªåŒ…åç§°ï¼Œè€Œå¯¹äºä¸åŒçš„æœºå™¨ï¼Œé¡¹ç›®æ‰€åœ¨çš„ä½ç½®ä¸åŒï¼Œæ‰€ä»¥å°±éœ€è¦é€šè¿‡ç±»åŠ è½½å™¨è·å–åˆ°èµ„æºçš„å…·ä½“è·¯å¾„</li>
</ul>
<pre><code class="language-java">URL url = classLoader.getResource(packageName.replace(&quot;.&quot;, &quot;/&quot;));
</code></pre>
<ul>
<li>getResource()æ¥æ”¶çš„æ˜¯ä¸€ä¸ªä»¥åæ–œæ åˆ†å‰²çš„è·¯å¾„ï¼Œè€Œä¸€èˆ¬ç”¨æˆ·æä¾›çš„éƒ½æ˜¯ä»¥â€œ.â€åˆ†å‰²çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æ›¿æ¢æˆåæ–œæ </li>
<li>classLoader.getResource()æ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªURLï¼Œå¯ä»¥è·å–åˆ°åè®®ï¼ŒåŸŸåï¼Œç«¯å£å·ï¼Œè·¯å¾„ï¼Œè¯·æ±‚å‚æ•°ï¼Œå¦‚ï¼šhttps[åè®®]ğŸ˜•/www.xzzz2020.cn[åŸŸå]:80[ç«¯å£å·]/public/simplespring[è·¯å¾„]?id=xxx[è¯·æ±‚å‚æ•°]</li>
<li>è€Œæˆ‘ä»¬éœ€è¦å…³æ³¨çš„æ˜¯è¿™æ ·çš„URLï¼š<strong>file:///F:/study/Spring</strong>ï¼Œè¯¥èµ„æºå¯ä»¥å®šä½æœ¬æœºçš„å”¯ä¸€èµ„æºï¼Œæ‰€ä»¥éœ€è¦é€šè¿‡URLç±»ä¸­ä¸¤ä¸ªæ–¹æ³•getProtocol()å’ŒgetPath()è·å–å®šä½åŒ…çš„æ–‡ä»¶åè®®å’Œç»å¯¹è·¯å¾„</li>
<li>æ¥ç€ä¸»è¦æ˜¯é€’å½’è°ƒç”¨ç›®å½•æ‰€æœ‰.classæ–‡ä»¶ï¼Œåˆ©ç”¨åå°„Class.forNameæ–¹æ³•åˆ›å»ºå®ä¾‹ï¼Œå¹¶åŠ å…¥åˆ°é›†åˆä¸­</li>
</ul>
<p><strong>å®Œæ•´ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</strong></p>
<pre><code class="language-java">/**
 * ç±»åŠ è½½å·¥å…·ç±»
 * @author xzzz2020
 * @version 1.0
 * @date 2020/7/31 13:20
 */

@Slf4j
public final class ClassUtil {

    private static final String FILE_PROTOCLO = &quot;file&quot;;

    private ClassUtil() {
    }

    /**
     * è·å–åŒ…ä¸‹ç±»çš„é›†åˆ
     *
     * @param packageName åŒ…å
     * @return è·å–ç±»çš„é›†åˆ
     */
    public static Set&lt;Class&lt;?&gt;&gt; extractPackageClass(String packageName) {
        //1. è·å–ç±»çš„åŠ è½½å™¨ï¼Œä¸ºäº†è·å–é¡¹ç›®å‘å¸ƒçš„å®é™…è·¯å¾„
        ClassLoader classLoader = getClassLoader();
        //2. é€šè¿‡ç±»åŠ è½½å™¨è·å–åˆ°åŠ è½½çš„èµ„æºä¿¡æ¯
        URL url = classLoader.getResource(packageName.replace(&quot;.&quot;, &quot;/&quot;));
        if (url == null) {
            log.warn(&quot;unable to retrieve anything from package: &quot; + packageName);
            return null;
        } else {
            log.info(&quot;load path is &quot;+url.getProtocol()+&quot;://&quot;+url.getPath());
        }
        //3. æ ¹æ®ä¸åŒçš„èµ„æºç±»å‹ï¼Œé‡‡ç”¨ä¸åŒçš„æ–¹å¼è·å–èµ„æºçš„é›†åˆ
        Set&lt;Class&lt;?&gt;&gt; classSet = null;
        //è¿‡æ»¤å‡ºæ–‡ä»¶ç±»å‹çš„èµ„æº
        if (url.getProtocol().equalsIgnoreCase(FILE_PROTOCLO)){
            classSet = new HashSet&lt;&gt;();
            File packageDirectory = new File(url.getPath());//è·å–æ–‡ä»¶çš„å®é™…è·¯å¾„
            //é€’å½’éå†è¯¥ç›®å½•ä¸‹æ‰€æœ‰çš„classæ–‡ä»¶
            extractClassFile(classSet,packageDirectory,packageName);
        }
        return classSet;
    }

    /**
     * é€’å½’éå†è¯¥ç›®å½•ä¸‹æ‰€æœ‰çš„classæ–‡ä»¶
     * @param emptyClassSet è£…è½½ç›®æ ‡ç±»çš„é›†åˆ
     * @param fileSource æ–‡ä»¶æˆ–ç›®å½•
     * @param packageName åŠ è½½çš„åŒ…è·¯å¾„
     */
    private static void extractClassFile(Set&lt;Class&lt;?&gt;&gt; emptyClassSet, File fileSource, String packageName) {
        if (!fileSource.isDirectory()){

        }else {
            //åˆ—å‡ºå½“å‰ç›®å½•çš„æ‰€æœ‰æ–‡ä»¶å’Œæ–‡ä»¶å¤¹
            File[] files = fileSource.listFiles(new FileFilter() {
                /**
                 * è¯¥æ–¹æ³•æ˜¯è¿‡æ»¤å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å’Œç›®å½•
                 * @param file æ–‡ä»¶ç›®å½•
                 * @return å¦‚æœæ˜¯ç›®å½•ï¼Œè¿”å›trueï¼Œå¦‚æœæ˜¯.classæ–‡ä»¶ï¼ŒåŠ è½½åˆ°å®¹å™¨ä¸­ï¼Œå…¶ä»–çš„è¿”å›false
                 */
                @Override
                public boolean accept(File file) {
                    if (file.isDirectory()){
                        return true;
                    }else {
                        //è·å–æ–‡ä»¶çš„ç»å¯¹å€¼è·¯å¾„
                        String absoluteFilePath = file.getAbsolutePath();
                        if (absoluteFilePath.endsWith(&quot;.class&quot;)){
                            //å¦‚æœæ˜¯classæ–‡ä»¶ï¼Œç›´æ¥åŠ è½½
                            addToClassSet(absoluteFilePath);
                        }
                        //TODO æ­¤å¤„å¯ä»¥åŠ å…¥é’ˆå¯¹å…¶ä»–ç±»å‹èµ„æºçš„å¤„ç†
                    }
                    return false;
                }

                /**
                 * æ ¹æ®classæ–‡ä»¶çš„ç»å¯¹å€¼è·¯å¾„ï¼Œè·å–å¹¶ç”Ÿæˆclasså¯¹è±¡ï¼Œå¹¶æ”¾å…¥classSetä¸­
                 * @param absoluteFilePath æ–‡ä»¶çš„ç»å¯¹å€¼è·¯å¾„
                 */
                private void addToClassSet(String absoluteFilePath) {
                    //1.ä»classæ–‡ä»¶çš„ç»å¯¹å€¼è·¯å¾„é‡Œæå–å‡ºåŒ…å«äº†packageçš„ç±»å
                    //å¦‚/Users/baidu/imooc/springframework/sampleframework/target/classes/cn/xzzz2020/entity/dto/MainPageInfoDTO.class
                    //éœ€è¦å¼„æˆcn.xzzz2020.entity.dto.MainPageInfoDTO
                    absoluteFilePath  = absoluteFilePath.replace(File.separator, &quot;.&quot;);
                    String className = absoluteFilePath.substring(absoluteFilePath.indexOf(packageName));
                    className = className.substring(0,className.lastIndexOf(&quot;.&quot;));
                    //2.é€šè¿‡åå°„æœºåˆ¶è·å–å¯¹åº”çš„Classå¯¹è±¡å¹¶åŠ å…¥åˆ°classSeté‡Œ
                    Class&lt;?&gt; targetClass = loadClass(className);
                    emptyClassSet.add(targetClass);
                }
            });
            //é€’å½’éå†å…¨éƒ¨ç›®å½•
            if (files!=null){//å¦‚æœfileçš„æ•°ç»„ä¸ºç©ºï¼Œä½¿ç”¨foreachï¼Œè¿˜æ˜¯ä¼šæŠ›å‡ºç©ºæŒ‡é’ˆå¼‚å¸¸
                for (File file : files) {
                    extractClassFile(emptyClassSet,file,packageName);
                }
            }

        }
    }

    /**
     * è·å–ç±»åŠ è½½å™¨
     *
     * @return å½“å‰ç±»åŠ è½½å™¨
     */
    public static ClassLoader getClassLoader() {
        return Thread.currentThread().getContextClassLoader();
    }

    /**
     * è·å–classå¯¹è±¡
     * @param className classå…¨é™å®šç±»å
     * @return
     */
    public static Class&lt;?&gt; loadClass(String className){
        try {
            return Class.forName(className);
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
            log.error(&quot;Load class error &quot; + e);
            throw new RuntimeException();
        }
    }
    
    
    /**
     * å®ä¾‹åŒ–ç±»å¯¹è±¡
     * @param clazz éœ€è¦å®ä¾‹åŒ–çš„class
     * @param accessible æ˜¯å¦å…è®¸ä½¿ç”¨ç§æœ‰çš„æ„é€ å‡½æ•°
     * @param &lt;T&gt; å¯¹è±¡
     * @return
     */
    public static &lt;T&gt; T newInstance(Class&lt;?&gt; clazz,boolean accessible){
        try {
            Constructor constructor = clazz.getDeclaredConstructor();
            constructor.setAccessible(accessible);
            return (T) constructor.newInstance();
        } catch (Exception e) {
            log.error(&quot;newInstance &quot;+clazz+&quot; error &quot;+e);
            throw new RuntimeException();
        }
    }
    
    /**
     * è®¾ç½®ç±»çš„å±æ€§å€¼
     * @param field æˆå‘˜å˜é‡
     * @param target ç±»å®ä¾‹
     * @param value æˆå‘˜å˜é‡çš„å€¼
     * @param accessible æ˜¯å¦å…è®¸è®¾ç½®ç§æœ‰å±æ€§
     */
    public static void setField(Field field,Object target,Object value,boolean accessible){
        field.setAccessible(accessible);
        try {
            field.set(target,value);
        } catch (Exception e) {
            log.error(&quot;setFiled error &quot;,e);
            throw new RuntimeException(e);
        }
    }

}
</code></pre>
<h2 id="å››-å®ç°iocå®¹å™¨">å››ã€å®ç°IOCå®¹å™¨</h2>
<p><strong>å®¹å™¨ä¸€èˆ¬ç”±ä»¥ä¸‹ç»„æˆéƒ¨åˆ†ï¼š</strong></p>
<ul>
<li>ä¿å­˜Classå¯¹è±¡åŠå…¶å®ä¾‹çš„è½½ä½“</li>
<li>å®¹å™¨çš„åŠ è½½</li>
<li>å®¹å™¨çš„æ“ä½œæ–¹å¼</li>
</ul>
<blockquote>
<p>å®¹å™¨é¦–å…ˆæ˜¯å•ä¾‹çš„ï¼Œä½†æ˜¯ä¼ ç»Ÿçš„å•ä¾‹åªèƒ½é¿å…å¤šçº¿ç¨‹ä¸‹é‡å¤åˆ›å»ºçš„é—®é¢˜ï¼Œé¢å¯¹åå°„çš„å¼ºå¤§èƒ½åŠ›ï¼Œå¾ˆå®¹æ˜“å°±è¢«åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡</p>
<p>è€ŒJavaæä¾›äº†ä¸€ä¸ªæšä¸¾ç±»çš„å½¢å¼ï¼Œå¯ä»¥ä»æºç å±‚é¢é¿å…åˆ›å»ºå¤šä¸ªå¯¹è±¡ã€‚</p>
</blockquote>
<h3 id="1-æšä¸¾çš„å•ä¾‹">1. æšä¸¾çš„å•ä¾‹</h3>
<pre><code class="language-java">//è®¾ç½®ç§æœ‰æ„é€ å™¨
@NoArgsConstructor(access = AccessLevel.PRIVATE)
@Slf4j
public class BeanContainer {

    /**
     * è·å–å®¹å™¨å®ä¾‹
     * @return å®¹å™¨
     */
    public static BeanContainer getInstance() {
        return BeanContainerHolder.HOLDER.getInstance();
    }

    private enum BeanContainerHolder{
        HOLDER;
        private BeanContainer instance;
        BeanContainerHolder(){
            instance = new BeanContainer();
        }

        public BeanContainer getInstance() {
            return instance;
        }
    }
}
</code></pre>
<h3 id="2-ä¿å­˜classå¯¹è±¡åŠå…¶å®ä¾‹çš„è½½ä½“">2. ä¿å­˜Classå¯¹è±¡åŠå…¶å®ä¾‹çš„è½½ä½“</h3>
<p>ä¸ºäº†æ–¹ä¾¿è°ƒç”¨ï¼Œå°†é‡‡ç”¨mapçš„æ–¹å¼åˆ›å»ºè½½ä½“ï¼Œä½†æ˜¯ä¸æ˜¯ä½¿ç”¨HashMapï¼Œè€Œæ˜¯ConcurrentHashMapä»¥ä¿è¯é«˜å¹¶å‘ä¸‹çš„å®¹å™¨çº¿ç¨‹å®‰å…¨ã€‚</p>
<pre><code class="language-java">//å­˜æ”¾æ‰€æœ‰è¢«æ ‡è®°çš„map
private final Map&lt;Class&lt;?&gt;,Object&gt; beanMap = new ConcurrentHashMap&lt;&gt;();
</code></pre>
<h3 id="3-å®¹å™¨åŠ è½½">3. å®¹å™¨åŠ è½½</h3>
<pre><code class="language-java">/**
 * åŠ è½½Beanåˆ°å®¹å™¨ä¸­
 * @param packageName åŒ…åç§°
 */
public synchronized void loadBeans(String packageName){
    //åˆ¤æ–­æ˜¯å¦é‡å¤åŠ è½½
    if (isLoaded()){
        log.warn(&quot;BeanContainer has been loaded.&quot;);
        return;
    }
    //è·å–æŒ‡å®šåŒ…ä¸‹é¢çš„classå¯¹è±¡
    Set&lt;Class&lt;?&gt;&gt; classSet = ClassUtil.extractPackageClass(packageName);
    //åˆ¤æ–­èƒ½å¦åŠ è½½å¯¹è±¡
    if (ValidationUtil.isEmpty(classSet)){
        log.warn(&quot;This package &quot;+packageName+&quot; has nothing.&quot;);
        return;
    }
    for (Class&lt;?&gt; clazz :classSet){
        for (Class&lt;? extends Annotation&gt; annotation : BEAN_ANNOTATION) {
            //å¦‚æœç±»ä¸Šé¢æ ‡è®°äº†è‡ªå®šä¹‰çš„æ³¨è§£ï¼Œå°±æ”¾å…¥åˆ°å®¹å™¨ä¸­
            if (clazz.isAnnotationPresent(annotation)){
                beanMap.put(clazz,ClassUtil.newInstance(clazz,true));
            }
        }
    }
    loaded = true;
}
</code></pre>
<h3 id="4-å®¹å™¨çš„æ“ä½œå¢åˆ æ”¹æŸ¥">4. å®¹å™¨çš„æ“ä½œï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰</h3>
<pre><code class="language-java">/**
 * åˆ¤æ–­æ˜¯å¦è¿‡å®¹å™¨
 * @return trueä»£è¡¨å·²ç»åŠ è½½è¿‡å®¹å™¨äº†
 */
public boolean isLoaded() {
    return loaded;
}
/**
 * è·å–åŠ è½½åˆ°å®¹å™¨ä¸­beanå®ä¾‹çš„ä¸ªæ•°
 * @return
 */
public int getBeansSize(){
    return beanMap.size();
}
/**
 * æ·»åŠ å¯¹è±¡å®ä¾‹åˆ°å®¹å™¨ä¸­
 * @param clazz æŒ‡å®šå¯¹è±¡
 * @param bean æŒ‡å®šå®ä¾‹
 * @return æ·»åŠ çš„å¯¹è±¡
 */
public Object addBean(Class&lt;?&gt; clazz,Object bean){
    return beanMap.put(clazz, bean);
}
/**
 * åˆ é™¤å®¹å™¨ä¸­beançš„å®ä¾‹
 * @param clazz æŒ‡å®šå¯¹è±¡
 * @return åˆ é™¤çš„å¯¹è±¡
 */
public Object removeBean(Class&lt;?&gt; clazz){
    return beanMap.remove(clazz);
}
/**
 * è·å–æŒ‡å®šå¯¹è±¡çš„å®ä¾‹
 * @param clazz æŒ‡å®šå¯¹è±¡
 * @return æŒ‡å®šå®ä¾‹
 */
public Object getBean(Class&lt;?&gt; clazz){
    return beanMap.get(clazz);
}
/**
 * è·å–å®¹å™¨ä¸­æ‰€æœ‰å¯¹è±¡çš„é›†åˆ
 * @return å¯¹è±¡é›†åˆ
 */
public Set&lt;Class&lt;?&gt;&gt; getClasses(){
    return beanMap.keySet();
}
/**
 * è·å–å®¹å™¨ä¸­æ‰€æœ‰å®ä¾‹åŒ–å¯¹è±¡é›†åˆ
 * @return å®ä¾‹åŒ–å¯¹è±¡é›†åˆ
 */
public Set&lt;Object&gt; getBeans(){
    return new HashSet&lt;&gt;(beanMap.values());
}
/**
 * æ ¹æ®æ³¨è§£è·å–å¯¹è±¡é›†åˆ
 * @param annotation æ³¨è§£
 * @return
 */
public Set&lt;Class&lt;?&gt;&gt; getClassesByAnnotation(Class&lt;? extends Annotation&gt; annotation){
    //1.è·å–beanMapçš„æ‰€æœ‰classå¯¹è±¡
    Set&lt;Class&lt;?&gt;&gt; keySet = getClasses();
    if(ValidationUtil.isEmpty(keySet)){
        log.warn(&quot;nothing in beanMap&quot;);
        return null;
    }
    //2.é€šè¿‡æ³¨è§£ç­›é€‰è¢«æ³¨è§£æ ‡è®°çš„classå¯¹è±¡ï¼Œå¹¶æ·»åŠ åˆ°classSeté‡Œ
    Set&lt;Class&lt;?&gt;&gt; classSet = new HashSet&lt;&gt;();
    for (Class&lt;?&gt; clazz : keySet) {
        if (clazz.isAnnotationPresent(annotation)){
            classSet.add(clazz);
        }
    }
    return classSet.size()&gt;0?classSet:null;
}
/**
 * é€šè¿‡æ¥å£æˆ–è€…çˆ¶ç±»è·å–å®ç°ç±»æˆ–è€…å­ç±»çš„Classé›†åˆï¼Œä¸åŒ…æ‹¬å…¶æœ¬èº«
 *
 * @param interfaceOrClass æ¥å£Classæˆ–è€…çˆ¶ç±»Class
 * @return Classé›†åˆ
 */
public Set&lt;Class&lt;?&gt;&gt; getClassesBySuper(Class&lt;?&gt; interfaceOrClass){
    //1.è·å–beanMapçš„æ‰€æœ‰classå¯¹è±¡
    Set&lt;Class&lt;?&gt;&gt; keySet = getClasses();
    if(ValidationUtil.isEmpty(keySet)){
        log.warn(&quot;nothing in beanMap&quot;);
        return null;
    }
    //2.é€šè¿‡keySetçš„å…ƒç´ æ˜¯å¦æ˜¯ä¼ å…¥çš„æ¥å£æˆ–è€…å­ç±»ï¼Œå¦‚æœæ˜¯ï¼Œå¹¶æ·»åŠ åˆ°classSeté‡Œ
    Set&lt;Class&lt;?&gt;&gt; classSet = new HashSet&lt;&gt;();
    for (Class&lt;?&gt; clazz : keySet) {
        //isAssignableFromå¯ä»¥åˆ¤æ–­æ˜¯å¦æ˜¯åŒä¸€ä¸ªç±»æˆ–è€…å…¶è¶…ç±»
        if (interfaceOrClass.isAssignableFrom(clazz) &amp;&amp; !clazz.equals(interfaceOrClass)){
            classSet.add(clazz);
        }
    }
    return classSet.size()&gt;0?classSet:null;
}
</code></pre>
<h2 id="äº”-ä¾èµ–æ³¨å…¥">äº”ã€ä¾èµ–æ³¨å…¥</h2>
<h3 id="1-ä¾èµ–æ³¨å…¥çš„æ³¨è§£">1. ä¾èµ–æ³¨å…¥çš„æ³¨è§£</h3>
<pre><code class="language-java">/**
 * @author xzzz2020
 * @version 1.0
 * @date 2020/7/31 17:06
 */

@Target(ElementType.FIELD)
@Retention(RetentionPolicy.RUNTIME)
public @interface Autowired {
    String value() default &quot;&quot;;
}
</code></pre>
<h3 id="2-å¯¹æœ‰æ³¨è§£çš„å±æ€§è¿›è¡Œä¾èµ–æ³¨å…¥">2. å¯¹æœ‰æ³¨è§£çš„å±æ€§è¿›è¡Œä¾èµ–æ³¨å…¥</h3>
<pre><code class="language-java">/**
 * æä¾›ä¾èµ–æ³¨å…¥
 *
 * @author xzzz2020
 * @version 1.0
 * @date 2020/7/31 17:12
 */
@Slf4j
public class DependencyInjector {
    //Beanå®¹å™¨
    private BeanContainer beanContainer;

    public DependencyInjector() {
        beanContainer = BeanContainer.getInstance();
    }

    /**
     * æ‰§è¡Œä¾èµ–æ³¨å…¥
     */
    public void doIoc() {
        if (ValidationUtil.isEmpty(beanContainer.getClasses())) {
            log.warn(&quot;empty classset in BeanContainer&quot;);
            return;
        }
        //1.éå†Beanå®¹å™¨ä¸­æ‰€æœ‰çš„Classå¯¹è±¡
        Set&lt;Class&lt;?&gt;&gt; classSet = beanContainer.getClasses();
        for (Class&lt;?&gt; clazz : classSet) {
            //2.éå†Classå¯¹è±¡çš„æ‰€æœ‰æˆå‘˜å˜é‡
            Field[] fields = clazz.getDeclaredFields();
            if (ValidationUtil.isEmpty(fields)){
                continue;
            }
            //3.æ‰¾å‡ºè¢«Autowiredæ ‡è®°çš„æˆå‘˜å˜é‡
            for (Field field : fields) {
                if (field.isAnnotationPresent(Autowired.class)){
                    //è·å–å±æ€§ä¸Šé¢çš„æ³¨è§£ï¼Œæ¥è§£æå±æ€§
                    Autowired autowired = field.getAnnotation(Autowired.class);
                    String value = autowired.value();
                    //4.è·å–è¿™äº›æˆå‘˜å˜é‡çš„ç±»å‹
                    Class&lt;?&gt; fieldClazz = field.getType();
                    //5.è·å–è¿™äº›æˆå‘˜å˜é‡çš„ç±»å‹åœ¨å®¹å™¨é‡Œå¯¹åº”çš„å®ä¾‹
                    Object fieldValue = getFieldInstance(fieldClazz,value);
                    //è·å–ä¸åˆ°å¯¹è±¡ï¼Œæ³¨å…¥å¤±è´¥
                    if (fieldValue == null){
                        throw new RuntimeException(&quot;unable to inject relevant typeï¼Œtarget fieldClass is:&quot; + fieldClazz.getName() + &quot; in &quot; +clazz.getSimpleName() );
                    }
                    //6.é€šè¿‡åå°„å°†å¯¹åº”çš„æˆå‘˜å˜é‡å®ä¾‹æ³¨å…¥åˆ°æˆå‘˜å˜é‡æ‰€åœ¨ç±»çš„å®ä¾‹é‡Œ
                    Object targetBean = beanContainer.getBean(clazz);
                    ClassUtil.setField(field,targetBean,fieldValue,true);
                }
            }

        }

    }

    /**
     * æ ¹æ®classå¯¹è±¡è·å–å…¶å¯¹è±¡æˆ–è€…å®ç°ç±»
     * @param fieldClazz å±æ€§å®šä¹‰çš„å¯¹è±¡
     * @return
     */
    private Object getFieldInstance(Class&lt;?&gt; fieldClazz,String value) {
        Object fieldValue = beanContainer.getBean(fieldClazz);
        if (fieldValue!=null){
            return fieldClazz;
        }else {
           Class&lt;?&gt; implClass = getImplementClass(fieldClazz,value);
           if (implClass!=null){
               return beanContainer.getBean(implClass);
           }else {
               return null;
           }
        }
    }

    /**
     * è·å–æ¥å£çš„å®ç°ç±»
     * @param fieldClazz æ¥å£
     * @return
     */
    private Class&lt;?&gt; getImplementClass(Class&lt;?&gt; fieldClazz,String value) {
        Set&lt;Class&lt;?&gt;&gt; classSet = beanContainer.getClassesBySuper(fieldClazz);
        if (!ValidationUtil.isEmpty(classSet)){
            if (ValidationUtil.isEmpty(value)){//ä»£è¡¨ç”¨æˆ·æ²¡æœ‰æŒ‡å®šå…·ä½“æ˜¯é‚£ä¸ªå®ç°ç±»
                if (classSet.size()==1){
                    return classSet.iterator().next();
                }else {//å¦‚æœè¯¥æ¥å£æœ‰å¤šä¸ªå®ç°ç±»ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸
                    throw new RuntimeException(&quot;multiple implemented classes for &quot; + fieldClazz.getName() + &quot; please set @Autowired's value to pick one&quot;);
                }
            }else {//ç”¨æˆ·æŒ‡å®šå…·ä½“å®ç°å­ç±»
                for (Class&lt;?&gt; clazz : classSet) {
                    if (value.equals(clazz.getSimpleName())){//æ˜¯ç”¨æˆ·çš„æŒ‡å®šç±»
                        return clazz;
                    }
                }
            }
        }
        return null;
    }
}
</code></pre>

<span id="footnote"></span>
<div id = "warn"></div>
</div>
<div class="toc-container"><ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#%E4%B8%80-%E6%89%8B%E5%86%99springioc%E5%AE%B9%E5%99%A8%E7%AE%80%E4%BB%8B">ä¸€ã€æ‰‹å†™SpringIOCå®¹å™¨ç®€ä»‹</a></li>
<li><a href="#%E4%BA%8C-%E5%88%9B%E5%BB%BA%E6%B3%A8%E8%A7%A3">äºŒã€åˆ›å»ºæ³¨è§£</a></li>
<li><a href="#%E4%B8%89-%E6%8F%90%E5%8F%96%E6%A0%87%E8%AE%B0%E5%AF%B9%E8%B1%A1">ä¸‰ã€æå–æ ‡è®°å¯¹è±¡</a>
<ul>
<li><a href="#1-%E6%8C%87%E5%AE%9A%E8%8C%83%E5%9B%B4%E5%8A%A0%E8%BD%BD">1. æŒ‡å®šèŒƒå›´åŠ è½½</a></li>
</ul>
</li>
<li><a href="#%E5%9B%9B-%E5%AE%9E%E7%8E%B0ioc%E5%AE%B9%E5%99%A8">å››ã€å®ç°IOCå®¹å™¨</a>
<ul>
<li><a href="#1-%E6%9E%9A%E4%B8%BE%E7%9A%84%E5%8D%95%E4%BE%8B">1. æšä¸¾çš„å•ä¾‹</a></li>
<li><a href="#2-%E4%BF%9D%E5%AD%98class%E5%AF%B9%E8%B1%A1%E5%8F%8A%E5%85%B6%E5%AE%9E%E4%BE%8B%E7%9A%84%E8%BD%BD%E4%BD%93">2. ä¿å­˜Classå¯¹è±¡åŠå…¶å®ä¾‹çš„è½½ä½“</a></li>
<li><a href="#3-%E5%AE%B9%E5%99%A8%E5%8A%A0%E8%BD%BD">3. å®¹å™¨åŠ è½½</a></li>
<li><a href="#4-%E5%AE%B9%E5%99%A8%E7%9A%84%E6%93%8D%E4%BD%9C%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5">4. å®¹å™¨çš„æ“ä½œï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰</a></li>
</ul>
</li>
<li><a href="#%E4%BA%94-%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5">äº”ã€ä¾èµ–æ³¨å…¥</a>
<ul>
<li><a href="#1-%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5%E7%9A%84%E6%B3%A8%E8%A7%A3">1. ä¾èµ–æ³¨å…¥çš„æ³¨è§£</a></li>
<li><a href="#2-%E5%AF%B9%E6%9C%89%E6%B3%A8%E8%A7%A3%E7%9A%84%E5%B1%9E%E6%80%A7%E8%BF%9B%E8%A1%8C%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5">2. å¯¹æœ‰æ³¨è§£çš„å±æ€§è¿›è¡Œä¾èµ–æ³¨å…¥</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="fullPage"><canvas id="canvas"></canvas></div>
</article>
<div id="eof"><span>EOF</span></div><div class="round-shape-one"></div>
<section>
<div class="doc_comments">

	  
		<div id="gitalk-container"></div>
		<!--è¯„è®ºæ˜¾ç¤ºåŒºï¼Œè¯·æ’å…¥åˆé€‚çš„ä½ç½®-->
<div id="comment"></div>
<!--Leancloud æ“ä½œåº“:-->
<script src="//cdn1.lncld.net/static/js/3.6.1/av-min.js"></script>
<!--Valine çš„æ ¸å¿ƒä»£ç åº“-->
<script src="//cdn.jsdelivr.net/npm/valine@1.4.4/dist/Valine.min.js"></script>
<script>
    new Valine({
        el:'#comment',
        appId: 'DysN4QrSvmmE6SpDXopbCLD6-gzGzoHsz',
        appKey: 'mjK643yLFa4WWXtobofr24Ap',
        placeholder: 'ãƒ¾ï¾‰â‰§âˆ€â‰¦)oå¿«æ¥è¯„è®ºä¸€ä¸‹å§!',
        avatar:''
    });
</script>
	  
		  
	  

</div></section>
</div></div></div>
<!--
<script>
"use strict";!function(){for(var n=document.getElementsByTagName("pre"),e=n.length,s=0;s<e;s++){n[s].innerHTML='<span class="line-number"></span>'+n[s].innerHTML+'<span class="cl"></span>';for(var a=n[s].innerHTML.split(/\n/).length,r=0;r<a-1;r++){n[s].getElementsByTagName("span")[0].innerHTML+="<span>"+(r+1)+"</span>"}}}();
let mainNavLinks=document.querySelectorAll(".markdownIt-TOC a");window.addEventListener("scroll",event=>{let fromTop=window.scrollY;mainNavLinks.forEach((link,index)=>{let section=document.getElementById(decodeURI(link.hash).substring(1));let nextSection=null
if(mainNavLinks[index+1]){nextSection=document.getElementById(decodeURI(mainNavLinks[index+1].hash).substring(1));}
if(section.offsetTop<=fromTop){if(nextSection){if(nextSection.offsetTop>fromTop){link.classList.add("currentToc");}else{link.classList.remove("currentToc");}}else{link.classList.add("currentToc");}}else{link.classList.remove("currentToc");}});});
var list=document.querySelectorAll(".katex");for(var i=0;i<list.length;i++){list[i].style.display="unset"};
var h=document.documentElement,b=document.body,st="scrollTop",sh="scrollHeight",progress=document.querySelector(".progress"),scroll;document.addEventListener("scroll",function(){scroll=(h[st]||b[st])/((h[sh]||b[sh])-h.clientHeight)*100;progress.style.setProperty("--scroll",scroll+"%")});
var wxScale=new WxScale({fullPage:document.querySelector("#fullPage"),canvas:document.querySelector("#canvas")});var imgBox=document.querySelectorAll("#md_block img");for(var i=0;i<imgBox.length;i++){imgBox[i].onclick=function(e){wxScale.start(this)}};
content="æœ¬æ–‡æœ€åæ›´æ–°äº2020-09-10ï¼Œå·²è¶…è¿‡ 1 å¹´æ²¡æœ‰æ›´æ–°ï¼Œæ¶‰åŠçš„å†…å®¹å¯èƒ½å·²ç»å¤±æ•ˆï¼";var date1="2020-09-10 20:11:26";date1=date1.replace("-","/");var date2=new Date();var date3=date2.getTime()-new Date(date1).getTime();var days=Math.floor(date3/(24*3600*1000));if(days>=365){document.getElementById("warn").innerHTML=content};
</script>
-->

<script>
    "use strict";
    ! function () {
        for (var n = document.getElementsByTagName("pre"), e = n.length, s = 0; s < e; s++) {
            n[s].innerHTML = '<span class="line-number"></span>' + n[s].innerHTML + '<span class="cl"></span>';
            for (var a = n[s].innerHTML.split(/\n/).length, r = 0; r < a - 1; r++) {
                n[s].getElementsByTagName("span")[0].innerHTML += "<span>" + (r + 1) + "</span>"
            }
        }
    }();
    let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");
    window.addEventListener("scroll", event => {
        let fromTop = window.scrollY;
        mainNavLinks.forEach((link, index) => {
            let section = document.getElementById(decodeURI(link.hash).substring(1));
            let nextSection = null
            if (mainNavLinks[index + 1]) {
                nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(
                    1));
            }
            if (section.offsetTop <= fromTop) {
                if (nextSection) {
                    if (nextSection.offsetTop > fromTop) {
                        link.classList.add("currentToc");
                    } else {
                        link.classList.remove("currentToc");
                    }
                } else {
                    link.classList.add("currentToc");
                }
            } else {
                link.classList.remove("currentToc");
            }
        });
    });
    var list = document.querySelectorAll(".katex");
    for (var i = 0; i < list.length; i++) {
        list[i].style.display = "unset"
    };
    var h = document.documentElement,
        b = document.body,
        st = "scrollTop",
        sh = "scrollHeight",
        progress = document.querySelector(".progress"),
        scroll;
    document.addEventListener("scroll", function () {
        scroll = (h[st] || b[st]) / ((h[sh] || b[sh]) - h.clientHeight) * 100;
        progress.style.setProperty("--scroll", scroll + "%")
    });
    var wxScale = new WxScale({
        fullPage: document.querySelector("#fullPage"),
        canvas: document.querySelector("#canvas")
    });
    var imgBox = document.querySelectorAll("#md_block img");
    for (var i = 0; i < imgBox.length; i++) {
        imgBox[i].onclick = function (e) {
            wxScale.start(this)
        }
    };
    content = "æœ¬æ–‡æœ€åæ›´æ–°äº2020-09-10ï¼Œå·²è¶…è¿‡ 1 å¹´æ²¡æœ‰æ›´æ–°ï¼Œæ¶‰åŠçš„å†…å®¹å¯èƒ½å·²ç»å¤±æ•ˆï¼";
    var date1 = "2020-09-10 20:11:26";
    date1 = date1.replace("-", "/");
    var date2 = new Date();
    var date3 = date2.getTime() - new Date(date1).getTime();
    var days = Math.floor(date3 / (24 * 3600 * 1000));
    if (days >= 365) {
        document.getElementById("warn").innerHTML = content
    };
</script>

<style>#magnifyImg{position:fixed;left:0;top:0;text-align:center;width:100%;display:none;z-index:9999}#magnifyImg img{object-fit:contain;background:#eaecef;padding:15px;border-radius:10px;height:auto;width:auto;vertical-align:middle}</style>
<a id="scrollUp" href="#top" style="position: fixed; z-index: 2147483647; display: block;"></a><div class="footer animated fadeInDown"><div class="site_footer"><div class="mysocials"><div class="my_socials"></div></div><div class="copyright"id="copyright">Copyright Â© 2018-2020 <a href="https://xzzz2020.github.io" style="margin:0;">xzzz2020</a>.</div>
<span style="display: inline;margin-right:15px;">ğŸ‘<strong><span id="busuanzi_value_site_pv"></span></strong></span><span id="busuanzi_container_page_pv" style="display: inline;"><span>ğŸ“š<strong>61</strong> posts</span></div></div>
<script>
console.log("\n %c \u26a1Theme: Bitcron-pro Author's Blog:https://blog.blinkstar.cn  Writen By Serence  \n\n", "color: #ffffff; background: rgba(49, 49, 49, 0.85); padding:5px 0;border-radius:5px;", );
</script>
<script src="https://cdn.jsdelivr.net/npm/instant.page@3.0.0/instantpage.min.js" type="module" defer></script>
<script type="text/javascript" async src="https://xzzz2020.github.io/media/js/prism.js"></script>
</body>
</html>