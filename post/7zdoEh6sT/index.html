<!DOCTYPE html>
<html>
<head>
<link rel="shortcut icon" href="https://xzzz2020.github.io/favicon.ico" type="image/x-icon" /><meta name="viewport"content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/><meta name="apple-mobile-web-app-capable"content="yes"/><meta name="apple-mobile-web-app-status-bar-style"content="black"/><meta name="format-detection"content="telephone=no"/><meta name="renderer"content="webkit"><meta name="description"content="æ¸©æ•…è€ŒçŸ¥æ–°"><meta charset="UTF-8"><title>ã€æ€»ç»“ã€‘Javaå¹¶å‘å®ç°åŸç† | xzzz2020</title>
<link href="https://xzzz2020.github.io/styles/main.css" type="text/css" rel="stylesheet" /><link href="https://at.alicdn.com/t/font_1621793_zatzzgvf30g.css" type="text/css" rel="stylesheet" /><link rel="stylesheet" href="https://xzzz2020.github.io/media/css/katex.css"><script async src="https://cdn.jsdelivr.net/npm/busuanzi@2.3.0/bsz.pure.mini.min.js"></script><script src="https://xzzz2020.github.io/media/js/magnify.min.js"></script><script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js"></script><script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js" onload="renderMathInElement(document.body);"></script>
<script type="text/javascript">function btn_toggle(){document.getElementById("hn").classList.contains("no-js")?document.getElementById("hn").classList.remove("no-js"):document.getElementById("hn").classList.add("no-js")}</script>

<link rel="canonical" href="https://xzzz2020.github.io/post/7zdoEh6sT/" />
</head>
<body>
<div class="progress"></div><style>.progress{background:linear-gradient(to right,#87ceeb var(--scroll),transparent 0);background-repeat:no-repeat;position:fixed;width:100%;height:4px;z-index:1}</style><div class="darkmode-background"></div><div class="darkmode-layer"></div>
<noscript><p class="warn" >æœ¬é¡µé¢éœ€è¦æµè§ˆå™¨æ”¯æŒï¼ˆå¯ç”¨ï¼‰JavaScript</p></noscript><div class="header"><div class="logo_title"><div class="title animated fadeInDown"><a href="https://xzzz2020.github.io"><img alt="logo" style="display:inline-block;" src="https://xzzz2020.github.io/images/avatar.png"/></a><h1 title="xzzz2020" class="weaklink"><a  href="/">xzzz2020</a></h1>

<div class="navbar weaklink">
<div class="normal_nav">
<div class="bitcron_nav_container"><div class="bitcron_nav"><div class="bitcron_nav"><div style="display:flex;justify-content:center;"><nav class="mixed_site_nav_wrap site_nav_wrap"><ul class="mixed_site_nav site_nav sm sm-base">	<li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/" class="selected active current nav__item" >é¦–é¡µ</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/archives" class="selected active current nav__item" >å½’æ¡£</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/tags" class="selected active current nav__item" >æ ‡ç­¾</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/post/about" class="selected active current nav__item" >å…³äº</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/post/Friendship_chain" class="selected active current nav__item" >å‹é“¾</a></li></ul></nav>
<div style="float:right;margin-top:1em"><form id="gridea-search-form" data-update="1578893743252" action="/search/index.html"><input class="search-input" autocomplete="off" spellcheck="false" name="q" placeholder="Search..."></form></div><div style="margin-left:0.5em;margin-top:1.2em"><input id="switch_default" onclick="mobileBtn()" type="checkbox" class="switch_default"><label for="switch_default" class="toggleBtn"></label></div></div>
<div class="clear clear_nav_inline_end"></div></div></div><div class="clear clear_nav_end"></div></div></div><div class="hamberger" href="javascript:void(0)" onclick="btn_toggle();"><i class="iconfont icon-category"></i></div></div></div></div>
<div id="hn" class="no-js hidden_nav animated fadeInDown"><div class="bitcron_nav_container"><div class="bitcron_nav"><nav class="mixed_site_nav_wrap site_nav_wrap"><ul class="mixed_site_nav site_nav sm sm-base">	<li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/" class="selected active current nav__item" >é¦–é¡µ</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/archives" class="selected active current nav__item" >å½’æ¡£</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/tags" class="selected active current nav__item" >æ ‡ç­¾</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/post/about" class="selected active current nav__item" >å…³äº</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/post/Friendship_chain" class="selected active current nav__item" >å‹é“¾</a></li></ul><div class="clear clear_nav_inline_end"></div></nav></div><div class="clear clear_nav_end"></div></div>
<div style="display:flex;justify-content:center;inline-block;text-align:center;margin-top:7%"><div><form id="gridea-search-form" data-update="1599740351189" action="/search/index.html"><input class="search-input" autocomplete="off" spellcheck="false" name="q"  placeholder="Search..." /></form></div><div style="margin-left:0.5em"><input id="switch_default_h" onclick="mobileBtn()" type="checkbox" class="switch_default"><label for="switch_default" class="toggleBtn"></label></div></div>
</div></div>
<script>function enableDarkmode(){document.body.classList.add("darkmode"),document.getElementById("switch_default").checked=1,document.getElementById("switch_default_h").checked=1}function removeDarkmode(){document.body.classList.remove("darkmode"),document.getElementById("switch_default").checked=0,document.getElementById("switch_default_h").checked=0}function getCookie(a){var b,c=new RegExp("(^| )"+a+"=([^;]*)(;|$)");return(b=document.cookie.match(c))?unescape(b[2]):null}cookie=getCookie("darkmode"),"enable"==cookie&&enableDarkmode(),window.matchMedia("(prefers-color-scheme: dark)").matches&&"disable"!==cookie&&(enableDarkmode(),document.cookie="darkmode=enable; path=/");var mobileBtn=function(){1==document.getElementById("switch_default").checked?(enableDarkmode(),document.cookie="darkmode=enable; path=/"):(removeDarkmode(),document.cookie="darkmode=disable; path=/")};</script>

<div class="main"><div class="main-inner"><div class="content">
<article class="post">
<h2 class="post_title sm_margin"><a>ã€æ€»ç»“ã€‘Javaå¹¶å‘å®ç°åŸç†</a></h2>
<script>function lan(){if(document.getElementById("lan").innerText=="ç¹"){var s=document.getElementById("tongwenlet_cn");if(s!=null){document.body.removeChild(s)}var s=document.createElement("script");s.language="javascript";s.type="text/javascript";s.src="https://cdn.jsdelivr.net/gh/qyxtim/Static@1.1/bookmarklet_tw.js";s.id="tongwenlet_cn";document.body.appendChild(s);document.getElementById("lan").innerHTML="ç®€"}else{if(document.getElementById("lan").innerText=="ç°¡"){var s=document.getElementById("tongwenlet_cn");if(s!=null){document.body.removeChild(s)}var s=document.createElement("script");s.language="javascript";s.type="text/javascript";s.src="https://cdn.jsdelivr.net/gh/qyxtim/Static@1.1/bookmarklet_cn.js";s.id="tongwenlet_cn";document.body.appendChild(s);document.getElementById("lan").innerHTML="ç¹"}}};</script>
<section class="post_details"><i class="iconfont icon-calendar"></i><span style="margin-right:15px"> 2020-07-12</span><i class="iconfont icon-browse"></i><span style="margin-right:15px"> <span id="busuanzi_value_page_pv"></span> Views</span><i class="iconfont icon-category"></i><span class="weaklink" style="margin-right:15px">	<a href="https://xzzz2020.github.io/tag/Java_concurrency/" class="tag">Javaå¹¶å‘</a> | 	<a href="https://xzzz2020.github.io/tag/Interview_summary/" class="tag">é¢è¯•æ€»ç»“</a></span><i class="iconfont icon-caret-down"></i><span style="margin-right:15px">2940å­—</span><i class="iconfont icon-naozhong"></i><span style="margin-right:15px">11 min read</span><a id="lan" href="javascript:void(0);"onclick="lan();"title="è°ƒæ•´ç®€ç¹ä½“" style="margin-right:15px;">ç¹</a>
</section>

<img class="featureImg" alt="featureimg" src="https://img-1302474103.cos.ap-nanjing.myqcloud.com/img/photo-1594136976553-38699ae9047c.webp" referrerpolicy="no-referrer">

<div style="display:flex">
<div class="md_block" id="md_block">
<div class="round-shape-one"></div>
<blockquote>
<p>è¯¥æ–‡ç« ä¸ºé¢è¯•ç²¾åç‰ˆï¼Œå¦‚æœæ˜¯åˆå­¦è€…ï¼Œå»ºè®®å­¦ä¹ ä¸“æ ï¼š<a href="https://blog.csdn.net/qq_43040688/category_9910156.html">Javaå¹¶å‘ä¸“æ </a></p>
</blockquote>
<blockquote>
<p>Javaå¹¶å‘éœ€è¦ç»“åˆJVMä»¥åŠæ“ä½œç³»ç»Ÿçš„ç›¸å…³çŸ¥è¯†ï¼Œå»ºè®®å…ˆå­¦ä¹ è¿™ä¸¤ä¸ªéƒ¨åˆ†ï¼š<a href="https://blog.csdn.net/qq_43040688/category_9819683.html">JVMä¸“æ </a> å’Œ <a href="https://xzzz2020.gitee.io/tag/operating_system/">æ“ä½œç³»ç»Ÿä¸“æ </a></p>
</blockquote>
<p><ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#1-%E7%B1%BB%E9%94%81%E5%92%8C%E5%AF%B9%E8%B1%A1%E9%94%81%E7%9A%84%E5%8C%BA%E5%88%AB">1. ç±»é”å’Œå¯¹è±¡é”çš„åŒºåˆ«</a></li>
<li><a href="#2-synchronize%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86">2. synchronizeåº•å±‚å®ç°åŸç†</a></li>
<li><a href="#3-%E4%BB%80%E4%B9%88%E6%98%AF%E9%94%81%E9%87%8D%E5%85%A5">3. ä»€ä¹ˆæ˜¯é”é‡å…¥ï¼Ÿ</a></li>
<li><a href="#4-%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BC%9A%E5%AF%B9synchronized%E5%97%A4%E4%B9%8B%E4%BB%A5%E9%BC%BB">4. ä¸ºä»€ä¹ˆä¼šå¯¹synchronizedå—¤ä¹‹ä»¥é¼»</a></li>
<li><a href="#4-%E9%94%81%E4%BC%98%E5%8C%96">4. é”ä¼˜åŒ–</a></li>
<li><a href="#5-%E8%87%AA%E6%97%8B%E9%94%81%E5%92%8C%E8%87%AA%E9%80%82%E5%BA%94%E8%87%AA%E6%97%8B%E9%94%81">5. è‡ªæ—‹é”å’Œè‡ªé€‚åº”è‡ªæ—‹é”</a></li>
<li><a href="#6-%E9%94%81%E6%B6%88%E9%99%A4">6. é”æ¶ˆé™¤</a></li>
<li><a href="#7-%E9%94%81%E7%B2%97%E5%8C%96">7. é”ç²—åŒ–</a></li>
<li><a href="#8-%E9%94%81%E8%86%A8%E8%83%80%E5%92%8C%E9%94%81%E9%99%8D%E7%BA%A7">8. é”è†¨èƒ€å’Œé”é™çº§</a></li>
<li><a href="#9-%E5%81%8F%E5%90%91%E9%94%81">9. åå‘é”</a></li>
<li><a href="#10-%E8%BD%BB%E9%87%8F%E7%BA%A7%E9%94%81">10. è½»é‡çº§é”</a></li>
<li><a href="#10-%E9%87%8D%E9%87%8F%E7%BA%A7%E9%94%81">10. é‡é‡çº§é”</a></li>
<li><a href="#11-reentrantlock">11. ReentrantLock</a></li>
<li><a href="#12-synchronize%E5%92%8Creentrantlock">12. synchronizeå’ŒReentrantLock</a></li>
</ul>
</li>
</ul>
</p>
<h2 id="1-ç±»é”å’Œå¯¹è±¡é”çš„åŒºåˆ«">1. ç±»é”å’Œå¯¹è±¡é”çš„åŒºåˆ«</h2>
<p><strong>å¯¹è±¡é”</strong></p>
<ul>
<li>å¯¹è±¡é”æœ‰ä¸¤ç§ï¼Œç¬¬ä¸€ç§æ˜¯åœ¨æ™®é€šæ–¹æ³•ä¸ŠåŠ synchronizeå…³é”®å­—ï¼Œä¸€ç§æ˜¯ä½¿ç”¨synchronizeåŒæ­¥ä»£ç å—åŒæ­¥ä¸€ä¸ªå¯¹è±¡</li>
</ul>
<pre><code class="language-java">//åŒæ­¥ä»£ç å—
public void func() {
    synchronized (this) {
    // ...
    }
}

//åŒæ­¥ä¸€ä¸ªæ–¹æ³•
public synchronized void func () {
	// ...
}
</code></pre>
<p>ä½œç”¨éƒ½æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œå¦‚æœä¸åŒçº¿ç¨‹å»äº‰æŠ¢åŒä¸€ä¸ªå¯¹è±¡çš„å¤´ï¼Œå°±ä¼šé™·å…¥é˜»å¡ï¼Œå¦‚æœæ˜¯äº‰æŠ¢ä¸åŒå¯¹è±¡çš„å¤´ï¼Œåˆ™ä¸ä¼šé˜»å¡</p>
<p><strong>ç±»é”</strong></p>
<ul>
<li>ç±»é”æœ‰ä¸¤ç§ï¼Œç¬¬ä¸€ç§æ˜¯åœ¨é™æ€æ–¹æ³•ä¸ŠåŠ synchronizeå…³é”®å­—ï¼Œä¸€ç§æ˜¯ä½¿ç”¨synchronizeåŒæ­¥ä»£ç å—åŒæ­¥ç±»</li>
</ul>
<pre><code class="language-java">//åŒæ­¥ä¸€ä¸ªç±»
public void func() {
    synchronized (SynchronizedExample.class) {
    // ...
    }
}
public synchronized static void fun() {
	// ...
}
</code></pre>
<p>ä½œç”¨äºæ•´ä¸ªç±»ï¼Œå¦‚æœæ˜¯ä¸€ä¸ªç±»ä¸åŒçš„å¯¹è±¡ï¼Œè°ƒç”¨è¿™äº›æ–¹æ³•çš„æ—¶å€™ï¼Œä¼šé™·å…¥é˜»å¡</p>
<p><strong>ç±»é”æ˜¯ä¸€ç§ç‰¹æ®Šçš„å¯¹è±¡é”ï¼Œç±»é”å’Œå¯¹è±¡é”äº’ä¸å¹²æ‰°ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªçº¿ç¨‹è®¿é—®åŒæ­¥é™æ€æ–¹æ³•ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹è®¿é—®åŒæ­¥æ™®é€šæ–¹æ³•ï¼Œæ˜¯ä¸ä¼šé˜»å¡çš„</strong></p>
<pre><code class="language-java">public class Test {
    public static void main(String[] args) {
        ExecutorService executor = Executors.newFixedThreadPool(2);
        Solution solution = new Solution();
        executor.execute(new Runnable() {
            @Override
            public void run() {
                solution.fun2();
            }
        });
        executor.execute(new Runnable() {
            @Override
            public void run() {
                Solution.fun1();
            }
        });
        executor.shutdown();
    }

}


class Solution {

    public  synchronized static void fun1(){
        System.out.println(&quot;fun1...&quot;);
        try {
            TimeUnit.SECONDS.sleep(5);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }

    public  synchronized void fun2(){
        System.out.println(&quot;fun2...&quot;);
        try {
            TimeUnit.SECONDS.sleep(5);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
}
</code></pre>
<h2 id="2-synchronizeåº•å±‚å®ç°åŸç†">2. synchronizeåº•å±‚å®ç°åŸç†</h2>
<p>æ¯ä¸ªå¯¹è±¡å‡ºç”Ÿå°±æœ‰ä¸€ä¸ªå¯¹è±¡å¤´ï¼Œè€ŒMark Wordçš„ä¸­ä¼šåŒ…å«é”ä¿¡æ¯å’Œhashcodeä¿¡æ¯</p>
<p>synchronizeè·å–é”çš„è¿‡ç¨‹å…¶å®æ˜¯åœ¨Mark WordåŠ å…¥çº¿ç¨‹ä¿¡æ¯çš„è¿‡ç¨‹</p>
<figure data-type="image" tabindex="1"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWctMTMwMjQ3NDEwMy5jb3MuYXAtbmFuamluZy5teXFjbG91ZC5jb20vaW1nL2ltYWdlLTIwMjAwNzA4MTYwMjQ2NDE2LnBuZw?x-oss-process=image/format,png" alt="image-20200708160246416" loading="lazy"></figure>
<figure data-type="image" tabindex="2"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWctMTMwMjQ3NDEwMy5jb3MuYXAtbmFuamluZy5teXFjbG91ZC5jb20vaW1nL2ltYWdlLTIwMjAwNzA4MTYwMzQyMjk2LnBuZw?x-oss-process=image/format,png" alt="image-20200708160342296" loading="lazy"></figure>
<p><strong>Monitor :æ¯ä¸ªJavaå¯¹è±¡å¤©ç”Ÿè‡ªå¸¦äº†ä¸€æŠŠçœ‹ä¸è§çš„é”</strong></p>
<h2 id="3-ä»€ä¹ˆæ˜¯é”é‡å…¥">3. ä»€ä¹ˆæ˜¯é”é‡å…¥ï¼Ÿ</h2>
<p>å°±æ˜¯å¦‚æœä¸€ä¸ªçº¿ç¨‹è·å–äº†ä¸€ä¸ªå¯¹è±¡çš„é”ï¼Œå¦‚æœåœ¨è¿™ä¸ªæ—¶å€™ï¼Œåˆå°è¯•è·å–è¿™ä¸ªå¯¹è±¡çš„é”ï¼Œä¼šç›´æ¥è¿›å…¥ï¼š</p>
<pre><code class="language-java">class Solution {
    private void test(){
        synchronized (this){
            synchronized (this){
                //æ‰§è¡Œä»£ç 
            }
        }
    }
}
</code></pre>
<p>synchronizeå’ŒReentrantLockéƒ½æ˜¯æ”¯æŒå¯é‡å…¥çš„</p>
<h2 id="4-ä¸ºä»€ä¹ˆä¼šå¯¹synchronizedå—¤ä¹‹ä»¥é¼»">4. ä¸ºä»€ä¹ˆä¼šå¯¹synchronizedå—¤ä¹‹ä»¥é¼»</h2>
<ul>
<li>æ—©æœŸç‰ˆæœ¬ä¸­, synchronizedå±äºé‡é‡çº§é”,ä¾èµ–äºMutex Lockå®ç°</li>
<li>çº¿ç¨‹ä¹‹é—´çš„åˆ‡æ¢éœ€è¦ä»ç”¨æˆ·æ€è½¬æ¢åˆ°æ ¸å¿ƒæ€,å¼€é”€è¾ƒå¤§</li>
</ul>
<h2 id="4-é”ä¼˜åŒ–">4. é”ä¼˜åŒ–</h2>
<ul>
<li>synchronizedæœ‰å››ç§çŠ¶æ€æ— é”ã€åå‘é”ã€è½»é‡çº§é”ã€é‡é‡çº§é”</li>
<li>åå‘é”ä¸ä¼šä½¿ç”¨CASæ“ä½œè·å–é”ï¼Œç›´æ¥è®©ç¬¬ä¸€æ¬¡è·å–å¯¹è±¡å¤´mark wordçº¿ç¨‹è®¿é—®ï¼Œå½“æœ‰å…¶ä»–çº¿ç¨‹äº‰ç”¨å¯¹è±¡å¤´æ—¶ï¼Œä¼šç»“æŸåå‘ï¼Œè†¨èƒ€æˆè½»é‡çº§é”</li>
<li>è½»é‡çº§é”ä¼šä½¿ç”¨CASæ“ä½œæ¥è·å–é”ï¼Œå½“è·å–é”å¤±è´¥çš„æ—¶å€™ï¼Œä¼šé‡‡ç”¨è‡ªæ—‹çš„æ–¹å¼ï¼Œå¦‚æœå¤šæ¬¡å¤±è´¥ï¼Œä¼šé”å‡çº§ä¸ºé‡é‡çº§é”</li>
<li>åŒæ—¶ä¼˜åŒ–äº†è‡ªæ—‹ä½¿ç”¨è‡ªé€‚åº”è‡ªæ—‹ï¼Œè‡ªæ—‹çš„æ¬¡æ•°ä¸å›ºå®šï¼Œä¼šæ ¹æ®ä¸Šæ¬¡è‡ªæ—‹çš„æ¬¡æ•°æ¥å†³å®šè¿™æ¬¡è‡ªæ—‹çš„æ¬¡æ•°æ¥å†³å®šè¿™æ¬¡è‡ªæ—‹çš„æ¬¡æ•°</li>
<li>é‡é‡çº§é”å’Œè½»é‡çº§é”çš„å·®å¼‚åœ¨äºï¼Œçº¿ç¨‹è·å–ä¸åˆ°é”ï¼Œå°±ä¼šé™·å…¥é˜»å¡ï¼Œåˆ‡æ¢é”çš„æ€§èƒ½ååˆ†å·®ï¼Œé¢‘ç¹çš„åˆ‡æ¢é”å°±ä¼šé€ æˆå¤§é‡çš„æ€§èƒ½ä¼˜åŒ–</li>
<li>é”å‡çº§ç­–ç•¥ä¸»è¦åº”å¯¹ä¸€ç³»åˆ—æ“ä½œé¢‘ç¹çš„è·å–é”å’Œé‡Šæ”¾é”ï¼Œå°†æ‰©å¤§åŠ é”çš„èŒƒå›´ï¼Œä¸€æ¬¡åŠ é”å°±å¯ä»¥å®Œæˆæ“ä½œ</li>
<li>é”æ¶ˆé™¤ä¼šæ ¹æ®é€ƒé€¸åˆ†æï¼Œå½“å…±äº«å˜é‡å¹¶ä¸ä¼šè¢«å…¶ä»–çº¿ç¨‹è®¿é—®ï¼Œåˆ™å¯ä»¥æ¶ˆé™¤åŠ é”çš„è¿‡ç¨‹</li>
</ul>
<h2 id="5-è‡ªæ—‹é”å’Œè‡ªé€‚åº”è‡ªæ—‹é”">5. è‡ªæ—‹é”å’Œè‡ªé€‚åº”è‡ªæ—‹é”</h2>
<p>äº’æ–¥åŒæ­¥è¿›å…¥é˜»å¡çŠ¶æ€çš„å¼€é”€éƒ½å¾ˆå¤§ï¼Œåº”è¯¥å°½é‡é¿å…ã€‚åœ¨è®¸å¤šåº”ç”¨ä¸­ï¼Œå…±äº«æ•°æ®çš„é”å®šçŠ¶æ€åªä¼šæŒç»­å¾ˆçŸ­çš„ä¸€æ®µæ—¶é—´ã€‚è‡ªæ—‹é”çš„æ€æƒ³æ˜¯è®©ä¸€ä¸ªçº¿ç¨‹åœ¨è¯·æ±‚ä¸€ä¸ªå…±äº«æ•°æ®çš„é”æ—¶æ‰§è¡Œå¿™å¾ªç¯ï¼ˆè‡ªæ—‹ï¼‰ä¸€æ®µæ—¶é—´ï¼Œå¦‚æœåœ¨è¿™æ®µæ—¶é—´å†…èƒ½è·å¾—é”ï¼Œå°±å¯ä»¥é¿å…è¿›å…¥é˜»å¡çŠ¶æ€ã€‚è‡ªæ—‹é”è™½ç„¶èƒ½é¿å…è¿›å…¥é˜»å¡çŠ¶æ€ä»è€Œå‡å°‘å¼€é”€ï¼Œä½†æ˜¯å®ƒéœ€è¦è¿›è¡Œå¿™å¾ªç¯æ“ä½œå ç”¨ CPU æ—¶é—´ï¼Œ<strong>å®ƒåªé€‚ç”¨äºå…±äº«æ•°æ®çš„é”å®šçŠ¶æ€å¾ˆçŸ­çš„åœºæ™¯ã€‚</strong></p>
<p>åœ¨ JDK 1.6 ä¸­å¼•å…¥äº†è‡ªé€‚åº”çš„è‡ªæ—‹é”ã€‚<strong>è‡ªé€‚åº”æ„å‘³ç€è‡ªæ—‹çš„æ¬¡æ•°ä¸å†å›ºå®šäº†ï¼Œè€Œæ˜¯ç”±å‰ä¸€æ¬¡åœ¨åŒä¸€ä¸ªé”ä¸Šçš„è‡ªæ—‹æ¬¡æ•°åŠé”çš„æ‹¥æœ‰è€…çš„çŠ¶æ€æ¥å†³å®šã€‚</strong></p>
<h2 id="6-é”æ¶ˆé™¤">6. é”æ¶ˆé™¤</h2>
<p>é”æ¶ˆé™¤æ˜¯æŒ‡å¯¹äºè¢«æ£€æµ‹å‡ºä¸å¯èƒ½å­˜åœ¨ç«äº‰çš„å…±äº«æ•°æ®çš„é”è¿›è¡Œæ¶ˆé™¤ã€‚</p>
<p>é”æ¶ˆé™¤ä¸»è¦æ˜¯é€šè¿‡<strong>é€ƒé€¸åˆ†æ</strong>æ¥æ”¯æŒï¼Œå¦‚æœå †ä¸Šçš„å…±äº«æ•°æ®ä¸å¯èƒ½é€ƒé€¸å‡ºå»è¢«å…¶å®ƒçº¿ç¨‹è®¿é—®åˆ°ï¼Œé‚£ä¹ˆå°±å¯ä»¥æŠŠå®ƒä»¬å½“æˆç§æœ‰æ•°æ®å¯¹å¾…ï¼Œä¹Ÿå°±å¯ä»¥å°†å®ƒä»¬çš„é”è¿›è¡Œæ¶ˆé™¤ã€‚</p>
<p>å¯¹äºä¸€äº›çœ‹èµ·æ¥æ²¡æœ‰åŠ é”çš„ä»£ç ï¼Œå…¶å®éšå¼çš„åŠ äº†å¾ˆå¤šé”ã€‚ä¾‹å¦‚ä¸‹é¢çš„å­—ç¬¦ä¸²æ‹¼æ¥ä»£ç å°±éšå¼åŠ äº†é”</p>
<pre><code class="language-java">public static String concatString(String s1, String s2, String s3) {
    return s1 + s2 + s3;
}
</code></pre>
<p>String æ˜¯ä¸€ä¸ªä¸å¯å˜çš„ç±»ï¼Œç¼–è¯‘å™¨ä¼šå¯¹ String çš„æ‹¼æ¥è‡ªåŠ¨ä¼˜åŒ–ã€‚åœ¨ JDK 1.5 ä¹‹å‰ï¼Œä¼šè½¬åŒ–ä¸º StringBuffer å¯¹è±¡çš„è¿ç»­ append() æ“ä½œï¼ˆJDK1.6ä¹‹åå˜æˆStringBuiderï¼‰ï¼š</p>
<pre><code class="language-java">public static String concatString(String s1, String s2, String s3) {
    StringBuffer sb = new StringBuffer();
    sb.append(s1);
    sb.append(s2);
    sb.append(s3);
    return sb.toString();
}
</code></pre>
<p>æ¯ä¸ª append() æ–¹æ³•ä¸­éƒ½æœ‰ä¸€ä¸ªåŒæ­¥å—ã€‚è™šæ‹Ÿæœºè§‚å¯Ÿå˜é‡ sbï¼Œå¾ˆå¿«å°±ä¼šå‘ç°å®ƒçš„åŠ¨æ€ä½œç”¨åŸŸè¢«é™åˆ¶åœ¨ concatString()æ–¹æ³•å†…éƒ¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œsb çš„<strong>æ‰€æœ‰å¼•ç”¨æ°¸è¿œä¸ä¼šé€ƒé€¸åˆ° concatString() æ–¹æ³•ä¹‹å¤–</strong>ï¼Œå…¶ä»–çº¿ç¨‹æ— æ³•è®¿é—®åˆ°å®ƒï¼Œå› æ­¤å¯ä»¥è¿›è¡Œæ¶ˆé™¤ã€‚</p>
<p>â€‹</p>
<h2 id="7-é”ç²—åŒ–">7. é”ç²—åŒ–</h2>
<p>å¦‚æœä¸€ç³»åˆ—çš„è¿ç»­æ“ä½œéƒ½å¯¹åŒä¸€ä¸ªå¯¹è±¡åå¤åŠ é”å’Œè§£é”ï¼Œé¢‘ç¹çš„åŠ é”æ“ä½œå°±ä¼šå¯¼è‡´æ€§èƒ½æŸè€—ã€‚</p>
<p>ä¸Šä¸€èŠ‚çš„ç¤ºä¾‹ä»£ç ä¸­è¿ç»­çš„ append() æ–¹æ³•å°±å±äºè¿™ç±»æƒ…å†µã€‚å¦‚æœè™šæ‹Ÿæœºæ¢æµ‹åˆ°ç”±è¿™æ ·çš„ä¸€ä¸²é›¶ç¢çš„æ“ä½œéƒ½å¯¹åŒä¸€ä¸ªå¯¹è±¡åŠ é”ï¼Œå°†ä¼šæŠŠåŠ é”çš„èŒƒå›´æ‰©å±•ï¼ˆç²—åŒ–ï¼‰åˆ°æ•´ä¸ªæ“ä½œåºåˆ—çš„å¤–éƒ¨ã€‚å¯¹äºä¸Šä¸€èŠ‚çš„ç¤ºä¾‹ä»£ç å°±æ˜¯æ‰©å±•åˆ°ç¬¬ä¸€ä¸ªappend() æ“ä½œä¹‹å‰ç›´è‡³æœ€åä¸€ä¸ª append() æ“ä½œä¹‹åï¼Œè¿™æ ·åªéœ€è¦åŠ é”ä¸€æ¬¡å°±å¯ä»¥äº†ã€‚</p>
<h2 id="8-é”è†¨èƒ€å’Œé”é™çº§">8. é”è†¨èƒ€å’Œé”é™çº§</h2>
<p><strong>æ‰€è°“é”çš„å‡çº§ã€é™çº§ï¼Œå°±æ˜¯ JVM ä¼˜åŒ– synchronized è¿è¡Œçš„æœºåˆ¶ï¼Œå½“ JVM æ£€æµ‹åˆ°ä¸åŒçš„ç«äº‰çŠ¶å†µæ—¶ï¼Œä¼šè‡ªåŠ¨åˆ‡æ¢åˆ°é€‚åˆçš„é”å®ç°ï¼Œè¿™ç§åˆ‡æ¢å°±æ˜¯é”çš„å‡çº§ã€é™çº§ã€‚</strong></p>
<h2 id="9-åå‘é”">9. åå‘é”</h2>
<p>åå‘é”çš„æ€æƒ³æ˜¯åå‘äºè®©ç¬¬ä¸€ä¸ªè·å–é”å¯¹è±¡çš„çº¿ç¨‹ï¼Œè¿™ä¸ªçº¿ç¨‹åœ¨ä¹‹åè·å–è¯¥é”å°±ä¸å†éœ€è¦è¿›è¡ŒåŒæ­¥æ“ä½œï¼Œç”šè‡³è¿ CASæ“ä½œä¹Ÿä¸å†éœ€è¦ã€‚</p>
<p>å½“é”å¯¹è±¡ç¬¬ä¸€æ¬¡è¢«çº¿ç¨‹è·å¾—çš„æ—¶å€™ï¼Œè¿›å…¥åå‘çŠ¶æ€ï¼Œæ ‡è®°ä¸º 1 01ã€‚åŒæ—¶ä½¿ç”¨ CAS æ“ä½œå°†çº¿ç¨‹ ID è®°å½•åˆ° Mark Wordä¸­ï¼Œå¦‚æœ CAS æ“ä½œæˆåŠŸï¼Œè¿™ä¸ªçº¿ç¨‹ä»¥åæ¯æ¬¡è¿›å…¥è¿™ä¸ªé”ç›¸å…³çš„åŒæ­¥å—å°±ä¸éœ€è¦å†è¿›è¡Œä»»ä½•åŒæ­¥æ“ä½œã€‚</p>
<p>å½“æœ‰å¦å¤–ä¸€ä¸ªçº¿ç¨‹å»å°è¯•è·å–è¿™ä¸ªé”å¯¹è±¡æ—¶ï¼Œåå‘çŠ¶æ€å°±å®£å‘Šç»“æŸï¼Œæ­¤æ—¶æ’¤é”€åå‘ï¼ˆRevoke Biasï¼‰åæ¢å¤åˆ°æœªé”å®šçŠ¶æ€æˆ–è€…è½»é‡çº§é”çŠ¶æ€</p>
<h2 id="10-è½»é‡çº§é”">10. è½»é‡çº§é”</h2>
<p>è½»é‡çº§é”æ˜¯ç›¸å¯¹äºä¼ ç»Ÿçš„é‡é‡çº§é”è€Œè¨€ï¼Œå®ƒä½¿ç”¨ CAS æ“ä½œæ¥é¿å…é‡é‡çº§é”ä½¿ç”¨äº’æ–¥é‡çš„å¼€é”€ã€‚å¯¹äºç»å¤§éƒ¨åˆ†çš„é”ï¼Œåœ¨æ•´ä¸ªåŒæ­¥å‘¨æœŸå†…éƒ½æ˜¯ä¸å­˜åœ¨ç«äº‰çš„ï¼Œå› æ­¤ä¹Ÿå°±ä¸éœ€è¦éƒ½ä½¿ç”¨äº’æ–¥é‡è¿›è¡ŒåŒæ­¥ï¼Œå¯ä»¥å…ˆé‡‡ç”¨ CAS æ“ä½œè¿›è¡ŒåŒæ­¥ï¼Œå¦‚æœ CAS å¤±è´¥äº†å†æ”¹ç”¨äº’æ–¥é‡è¿›è¡ŒåŒæ­¥ã€‚</p>
<p>å½“å°è¯•è·å–ä¸€ä¸ªé”å¯¹è±¡æ—¶ï¼Œå¦‚æœé”å¯¹è±¡æ ‡è®°ä¸º001ï¼Œè¯´æ˜é”å¯¹è±¡çš„é”æœªé”å®šï¼ˆunlockedï¼‰çŠ¶æ€ã€‚æ­¤æ—¶è™šæ‹Ÿæœºåœ¨å½“å‰çº¿ç¨‹çš„è™šæ‹Ÿæœºæ ˆä¸­åˆ›å»º Lock Recordï¼Œç„¶åä½¿ç”¨ CAS æ“ä½œå°†å¯¹è±¡çš„ Mark Word æ›´æ–°ä¸º Lock Record æŒ‡é’ˆã€‚å¦‚æœ CASæ“ä½œæˆåŠŸäº†ï¼Œé‚£ä¹ˆçº¿ç¨‹å°±è·å–äº†è¯¥å¯¹è±¡ä¸Šçš„é”ï¼Œå¹¶ä¸”å¯¹è±¡çš„ Mark Word çš„é”æ ‡è®°å˜ä¸º 00ï¼Œè¡¨ç¤ºè¯¥å¯¹è±¡å¤„äºè½»é‡çº§é”çŠ¶æ€ã€‚</p>
<figure data-type="image" tabindex="3"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWctMTMwMjQ3NDEwMy5jb3MuYXAtbmFuamluZy5teXFjbG91ZC5jb20vaW1nL2ltYWdlLTIwMjAwNzExMTkyMzAzNTU5LnBuZw?x-oss-process=image/format,png" alt="image-20200711192303559" loading="lazy"></figure>
<p>å¦‚æœ CAS æ“ä½œå¤±è´¥äº†ï¼Œè™šæ‹Ÿæœºé¦–å…ˆä¼šæ£€æŸ¥å¯¹è±¡çš„ Mark Word æ˜¯å¦æŒ‡å‘å½“å‰çº¿ç¨‹çš„è™šæ‹Ÿæœºæ ˆï¼Œå¦‚æœæ˜¯çš„è¯è¯´æ˜å½“å‰çº¿ç¨‹å·²ç»æ‹¥æœ‰äº†è¿™ä¸ªé”å¯¹è±¡ï¼Œé‚£å°±å¯ä»¥ç›´æ¥è¿›å…¥åŒæ­¥å—ç»§ç»­æ‰§è¡Œï¼Œå¦åˆ™è¯´æ˜è¿™ä¸ªé”å¯¹è±¡å·²ç»è¢«å…¶ä»–çº¿ç¨‹çº¿ç¨‹æŠ¢å äº†ã€‚</p>
<p>å½“ç«äº‰çº¿ç¨‹å°è¯•å ç”¨è½»é‡çº§é”å¤±è´¥å¤šæ¬¡ä¹‹åï¼ˆä½¿ç”¨è‡ªæ—‹ï¼‰è½»é‡çº§é”å°±ä¼šè†¨èƒ€ä¸ºé‡é‡çº§é”ï¼Œé‡é‡çº§çº¿ç¨‹æŒ‡é’ˆæŒ‡å‘ç«äº‰çº¿ç¨‹ï¼Œç«äº‰çº¿ç¨‹ä¹Ÿä¼šé˜»å¡ï¼Œç­‰å¾…è½»é‡çº§çº¿ç¨‹é‡Šæ”¾é”åå”¤é†’ä»–ã€‚</p>
<h2 id="10-é‡é‡çº§é”">10. é‡é‡çº§é”</h2>
<p>é‡é‡çº§é”çš„åŠ é”ã€è§£é”è¿‡ç¨‹å’Œè½»é‡çº§é”å·®ä¸å¤šï¼ŒåŒºåˆ«æ˜¯ï¼š<strong>ç«äº‰å¤±è´¥åï¼Œçº¿ç¨‹é˜»å¡ï¼Œé‡Šæ”¾é”åï¼Œå”¤é†’é˜»å¡çš„çº¿ç¨‹ï¼Œä¸ä½¿ç”¨è‡ªæ—‹é”ï¼Œä¸ä¼šé‚£ä¹ˆæ¶ˆè€—CPUï¼Œæ‰€ä»¥é‡é‡çº§é”é€‚åˆç”¨åœ¨åŒæ­¥å—æ‰§è¡Œæ—¶é—´é•¿çš„æƒ…å†µä¸‹ã€‚</strong></p>
<figure data-type="image" tabindex="4"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWctMTMwMjQ3NDEwMy5jb3MuYXAtbmFuamluZy5teXFjbG91ZC5jb20vaW1nL2ltYWdlLTIwMjAwNzA4MTYyOTA0NjU2LnBuZw?x-oss-process=image/format,png" alt="image-20200708162904656" loading="lazy"></figure>
<h2 id="11-reentrantlock">11. ReentrantLock</h2>
<ul>
<li>ReentrantLock æ˜¯ java.util.concurrentï¼ˆJ.U.Cï¼‰åŒ…ä¸­çš„é”ã€‚</li>
<li>ReenTrantLockçš„å®ç°æ˜¯ä¸€ç§è‡ªæ—‹é”ï¼Œ é€šè¿‡å¾ªç¯è°ƒç”¨CASæ“ä½œæ¥å®ç°åŠ é”ã€‚</li>
<li>å®ƒçš„æ€§èƒ½æ¯”è¾ƒå¥½ä¹Ÿæ˜¯å› ä¸ºé¿å…äº†ä½¿çº¿ç¨‹è¿›å…¥å†…æ ¸æ€çš„é˜»å¡çŠ¶æ€ã€‚æƒ³å°½åŠæ³•é¿å…çº¿ç¨‹è¿›å…¥å†…æ ¸çš„é˜»å¡çŠ¶æ€æ˜¯æˆ‘ä»¬å»åˆ†æå’Œç†è§£é”è®¾è®¡çš„å…³é”®é’¥åŒ™ã€‚</li>
<li>æ”¯æŒå…¬å¹³é”ï¼Œä½†æ˜¯åªæ˜¯ç›¸å¯¹å…¬å¹³ï¼Œå¹¶ä¸èƒ½ä¸€å®šçš„ä¿è¯å…¬å¹³ï¼Œå¯ä»¥é¿å…çº¿ç¨‹çš„é¥¥é¥¿ç°è±¡ï¼Œå³é•¿æ—¶é—´è·å–ä¸åˆ°CPUçš„æ‰§è¡Œæƒï¼Œä½†æ˜¯å¦‚æœæ²¡æœ‰ä¸šåŠ¡éœ€æ±‚ï¼Œä¸å»ºè®®ä½¿ç”¨ï¼Œå› ä¸ºå…¶ä¼šé™ä½æ€§èƒ½</li>
<li>å¿…é¡»æ‰‹åŠ¨çš„é‡Šæ”¾é”ï¼Œä¸€èˆ¬ä½¿ç”¨try...catch..finallyé‡Šæ”¾é”</li>
<li>æ”¯æŒå¯é‡å…¥</li>
</ul>
<h2 id="12-synchronizeå’Œreentrantlock">12. synchronizeå’ŒReentrantLock</h2>
<ul>
<li>LockåŸºäº<code>AQS</code>å®ç°ï¼Œé€šè¿‡<code>intç±»å‹çŠ¶æ€</code>å’Œ<code>CASæœºåˆ¶</code>æ¥ç»´æŠ¤é”çš„è·å–ä¸é‡Šæ”¾</li>
<li>synchronizedéœ€è¦é€šè¿‡<code>monitor</code>ï¼Œç»å†ä¸€ä¸ªä»ç”¨æˆ·æ€åˆ°å†…æ ¸æ€çš„è½¬å˜è¿‡ç¨‹ï¼Œæ›´åŠ è€—æ—¶</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">æ¯”è¾ƒ</th>
<th style="text-align:center">synchronized</th>
<th style="text-align:center">Lock</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">é”çš„å®ç°</td>
<td style="text-align:center">æ˜¯javaå†…ç½®å…³é”®å­—ï¼Œåœ¨jvmå±‚é¢</td>
<td style="text-align:center">æ˜¯ä¸ªjavaç±»</td>
</tr>
<tr>
<td style="text-align:center">èƒ½å¦åˆ¤æ–­çŠ¶æ€</td>
<td style="text-align:center">æ— æ³•åˆ¤æ–­æ˜¯å¦è·å–é”çš„çŠ¶æ€</td>
<td style="text-align:center">å¯ä»¥åˆ¤æ–­æ˜¯å¦è·å–åˆ°é”</td>
</tr>
<tr>
<td style="text-align:center">é‡Šæ”¾é”çš„æ–¹å¼</td>
<td style="text-align:center">ä¼šè‡ªåŠ¨é‡Šæ”¾é”</td>
<td style="text-align:center">éœ€åœ¨finallyä¸­æ‰‹å·¥é‡Šæ”¾é”ï¼ˆunlock()æ–¹æ³•é‡Šæ”¾é”ï¼‰ï¼Œå¦åˆ™å®¹æ˜“é€ æˆçº¿ç¨‹æ­»é”</td>
</tr>
<tr>
<td style="text-align:center">ç­‰å¾…å¯ä¸­æ–­</td>
<td style="text-align:center">çº¿ç¨‹ä¼šä¸€ç›´ç­‰å¾…ä¸‹å»</td>
<td style="text-align:center">å¦‚æœå°è¯•è·å–ä¸åˆ°é”ï¼Œçº¿ç¨‹å¯ä»¥ä¸ç”¨ä¸€ç›´ç­‰å¾…å°±ç»“æŸ</td>
</tr>
<tr>
<td style="text-align:center">å…¬å¹³é”</td>
<td style="text-align:center">ä¸æ”¯æŒ</td>
<td style="text-align:center">æ”¯æŒå…¬å¹³é”</td>
</tr>
<tr>
<td style="text-align:center">æ€§èƒ½</td>
<td style="text-align:center">æ–°ç‰ˆæœ¬ Java å¯¹ synchronized è¿›è¡Œäº†å¾ˆå¤šä¼˜åŒ–ï¼Œä¾‹å¦‚è‡ªæ—‹é”ç­‰</td>
<td style="text-align:center">åŸºäº<code>AQS</code>å®ç°ï¼Œæ€§èƒ½å’Œsynchronizeå·®ä¸å¤š</td>
</tr>
</tbody>
</table>
<p><strong>ä½¿ç”¨å»ºè®®</strong>ï¼š</p>
<p>é™¤ééœ€è¦ä½¿ç”¨ ReentrantLock çš„é«˜çº§åŠŸèƒ½ï¼Œå¦åˆ™ä¼˜å…ˆä½¿ç”¨ synchronizedã€‚è¿™æ˜¯å› ä¸º synchronized æ˜¯ JVM å®ç°çš„ä¸€ç§é”æœºåˆ¶ï¼ŒJVM åŸç”Ÿåœ°æ”¯æŒå®ƒï¼Œè€Œ ReentrantLock ä¸æ˜¯æ‰€æœ‰çš„ JDK ç‰ˆæœ¬éƒ½æ”¯æŒã€‚å¹¶ä¸”ä½¿ç”¨ synchronized ä¸ç”¨æ‹…å¿ƒæ²¡æœ‰é‡Šæ”¾é”è€Œå¯¼è‡´æ­»é”é—®é¢˜ï¼Œå› ä¸º JVM ä¼šç¡®ä¿é”çš„é‡Šæ”¾ã€‚</p>

<span id="footnote"></span>
<div id = "warn"></div>
</div>
<div class="toc-container"><ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#1-%E7%B1%BB%E9%94%81%E5%92%8C%E5%AF%B9%E8%B1%A1%E9%94%81%E7%9A%84%E5%8C%BA%E5%88%AB">1. ç±»é”å’Œå¯¹è±¡é”çš„åŒºåˆ«</a></li>
<li><a href="#2-synchronize%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86">2. synchronizeåº•å±‚å®ç°åŸç†</a></li>
<li><a href="#3-%E4%BB%80%E4%B9%88%E6%98%AF%E9%94%81%E9%87%8D%E5%85%A5">3. ä»€ä¹ˆæ˜¯é”é‡å…¥ï¼Ÿ</a></li>
<li><a href="#4-%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BC%9A%E5%AF%B9synchronized%E5%97%A4%E4%B9%8B%E4%BB%A5%E9%BC%BB">4. ä¸ºä»€ä¹ˆä¼šå¯¹synchronizedå—¤ä¹‹ä»¥é¼»</a></li>
<li><a href="#4-%E9%94%81%E4%BC%98%E5%8C%96">4. é”ä¼˜åŒ–</a></li>
<li><a href="#5-%E8%87%AA%E6%97%8B%E9%94%81%E5%92%8C%E8%87%AA%E9%80%82%E5%BA%94%E8%87%AA%E6%97%8B%E9%94%81">5. è‡ªæ—‹é”å’Œè‡ªé€‚åº”è‡ªæ—‹é”</a></li>
<li><a href="#6-%E9%94%81%E6%B6%88%E9%99%A4">6. é”æ¶ˆé™¤</a></li>
<li><a href="#7-%E9%94%81%E7%B2%97%E5%8C%96">7. é”ç²—åŒ–</a></li>
<li><a href="#8-%E9%94%81%E8%86%A8%E8%83%80%E5%92%8C%E9%94%81%E9%99%8D%E7%BA%A7">8. é”è†¨èƒ€å’Œé”é™çº§</a></li>
<li><a href="#9-%E5%81%8F%E5%90%91%E9%94%81">9. åå‘é”</a></li>
<li><a href="#10-%E8%BD%BB%E9%87%8F%E7%BA%A7%E9%94%81">10. è½»é‡çº§é”</a></li>
<li><a href="#10-%E9%87%8D%E9%87%8F%E7%BA%A7%E9%94%81">10. é‡é‡çº§é”</a></li>
<li><a href="#11-reentrantlock">11. ReentrantLock</a></li>
<li><a href="#12-synchronize%E5%92%8Creentrantlock">12. synchronizeå’ŒReentrantLock</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="fullPage"><canvas id="canvas"></canvas></div>
</article>
<div id="eof"><span>EOF</span></div><div class="round-shape-one"></div>
<section>
<div class="doc_comments">

	  
		<div id="gitalk-container"></div>
		<!--è¯„è®ºæ˜¾ç¤ºåŒºï¼Œè¯·æ’å…¥åˆé€‚çš„ä½ç½®-->
<div id="comment"></div>
<!--Leancloud æ“ä½œåº“:-->
<script src="//cdn1.lncld.net/static/js/3.6.1/av-min.js"></script>
<!--Valine çš„æ ¸å¿ƒä»£ç åº“-->
<script src="//cdn.jsdelivr.net/npm/valine@1.4.4/dist/Valine.min.js"></script>
<script>
    new Valine({
        el:'#comment',
        appId: 'DysN4QrSvmmE6SpDXopbCLD6-gzGzoHsz',
        appKey: 'mjK643yLFa4WWXtobofr24Ap',
        placeholder: 'ãƒ¾ï¾‰â‰§âˆ€â‰¦)oå¿«æ¥è¯„è®ºä¸€ä¸‹å§!',
        avatar:''
    });
</script>
	  
		  
	  

</div></section>
</div></div></div>
<!--
<script>
"use strict";!function(){for(var n=document.getElementsByTagName("pre"),e=n.length,s=0;s<e;s++){n[s].innerHTML='<span class="line-number"></span>'+n[s].innerHTML+'<span class="cl"></span>';for(var a=n[s].innerHTML.split(/\n/).length,r=0;r<a-1;r++){n[s].getElementsByTagName("span")[0].innerHTML+="<span>"+(r+1)+"</span>"}}}();
let mainNavLinks=document.querySelectorAll(".markdownIt-TOC a");window.addEventListener("scroll",event=>{let fromTop=window.scrollY;mainNavLinks.forEach((link,index)=>{let section=document.getElementById(decodeURI(link.hash).substring(1));let nextSection=null
if(mainNavLinks[index+1]){nextSection=document.getElementById(decodeURI(mainNavLinks[index+1].hash).substring(1));}
if(section.offsetTop<=fromTop){if(nextSection){if(nextSection.offsetTop>fromTop){link.classList.add("currentToc");}else{link.classList.remove("currentToc");}}else{link.classList.add("currentToc");}}else{link.classList.remove("currentToc");}});});
var list=document.querySelectorAll(".katex");for(var i=0;i<list.length;i++){list[i].style.display="unset"};
var h=document.documentElement,b=document.body,st="scrollTop",sh="scrollHeight",progress=document.querySelector(".progress"),scroll;document.addEventListener("scroll",function(){scroll=(h[st]||b[st])/((h[sh]||b[sh])-h.clientHeight)*100;progress.style.setProperty("--scroll",scroll+"%")});
var wxScale=new WxScale({fullPage:document.querySelector("#fullPage"),canvas:document.querySelector("#canvas")});var imgBox=document.querySelectorAll("#md_block img");for(var i=0;i<imgBox.length;i++){imgBox[i].onclick=function(e){wxScale.start(this)}};
content="æœ¬æ–‡æœ€åæ›´æ–°äº2020-07-12ï¼Œå·²è¶…è¿‡ 1 å¹´æ²¡æœ‰æ›´æ–°ï¼Œæ¶‰åŠçš„å†…å®¹å¯èƒ½å·²ç»å¤±æ•ˆï¼";var date1="2020-07-12 18:42:22";date1=date1.replace("-","/");var date2=new Date();var date3=date2.getTime()-new Date(date1).getTime();var days=Math.floor(date3/(24*3600*1000));if(days>=365){document.getElementById("warn").innerHTML=content};
</script>
-->

<script>
    "use strict";
    ! function () {
        for (var n = document.getElementsByTagName("pre"), e = n.length, s = 0; s < e; s++) {
            n[s].innerHTML = '<span class="line-number"></span>' + n[s].innerHTML + '<span class="cl"></span>';
            for (var a = n[s].innerHTML.split(/\n/).length, r = 0; r < a - 1; r++) {
                n[s].getElementsByTagName("span")[0].innerHTML += "<span>" + (r + 1) + "</span>"
            }
        }
    }();
    let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");
    window.addEventListener("scroll", event => {
        let fromTop = window.scrollY;
        mainNavLinks.forEach((link, index) => {
            let section = document.getElementById(decodeURI(link.hash).substring(1));
            let nextSection = null
            if (mainNavLinks[index + 1]) {
                nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(
                    1));
            }
            if (section.offsetTop <= fromTop) {
                if (nextSection) {
                    if (nextSection.offsetTop > fromTop) {
                        link.classList.add("currentToc");
                    } else {
                        link.classList.remove("currentToc");
                    }
                } else {
                    link.classList.add("currentToc");
                }
            } else {
                link.classList.remove("currentToc");
            }
        });
    });
    var list = document.querySelectorAll(".katex");
    for (var i = 0; i < list.length; i++) {
        list[i].style.display = "unset"
    };
    var h = document.documentElement,
        b = document.body,
        st = "scrollTop",
        sh = "scrollHeight",
        progress = document.querySelector(".progress"),
        scroll;
    document.addEventListener("scroll", function () {
        scroll = (h[st] || b[st]) / ((h[sh] || b[sh]) - h.clientHeight) * 100;
        progress.style.setProperty("--scroll", scroll + "%")
    });
    var wxScale = new WxScale({
        fullPage: document.querySelector("#fullPage"),
        canvas: document.querySelector("#canvas")
    });
    var imgBox = document.querySelectorAll("#md_block img");
    for (var i = 0; i < imgBox.length; i++) {
        imgBox[i].onclick = function (e) {
            wxScale.start(this)
        }
    };
    content = "æœ¬æ–‡æœ€åæ›´æ–°äº2020-07-12ï¼Œå·²è¶…è¿‡ 1 å¹´æ²¡æœ‰æ›´æ–°ï¼Œæ¶‰åŠçš„å†…å®¹å¯èƒ½å·²ç»å¤±æ•ˆï¼";
    var date1 = "2020-07-12 18:42:22";
    date1 = date1.replace("-", "/");
    var date2 = new Date();
    var date3 = date2.getTime() - new Date(date1).getTime();
    var days = Math.floor(date3 / (24 * 3600 * 1000));
    if (days >= 365) {
        document.getElementById("warn").innerHTML = content
    };
</script>

<style>#magnifyImg{position:fixed;left:0;top:0;text-align:center;width:100%;display:none;z-index:9999}#magnifyImg img{object-fit:contain;background:#eaecef;padding:15px;border-radius:10px;height:auto;width:auto;vertical-align:middle}</style>
<a id="scrollUp" href="#top" style="position: fixed; z-index: 2147483647; display: block;"></a><div class="footer animated fadeInDown"><div class="site_footer"><div class="mysocials"><div class="my_socials"></div></div><div class="copyright"id="copyright">Copyright Â© 2018-2020 <a href="https://xzzz2020.github.io" style="margin:0;">xzzz2020</a>.</div>
<span style="display: inline;margin-right:15px;">ğŸ‘<strong><span id="busuanzi_value_site_pv"></span></strong></span><span id="busuanzi_container_page_pv" style="display: inline;"><span>ğŸ“š<strong>58</strong> posts</span></div></div>
<script>
console.log("\n %c \u26a1Theme: Bitcron-pro Author's Blog:https://blog.blinkstar.cn  Writen By Serence  \n\n", "color: #ffffff; background: rgba(49, 49, 49, 0.85); padding:5px 0;border-radius:5px;", );
</script>
<script src="https://cdn.jsdelivr.net/npm/instant.page@3.0.0/instantpage.min.js" type="module" defer></script>
<script type="text/javascript" async src="https://xzzz2020.github.io/media/js/prism.js"></script>
</body>
</html>